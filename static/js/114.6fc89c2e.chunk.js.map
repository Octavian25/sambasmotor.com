{"version":3,"sources":["pages/Stoking/PermintaanBarang/ModalPermintaanBarang.jsx"],"names":["__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_redux__WEBPACK_IMPORTED_MODULE_1__","redux_form__WEBPACK_IMPORTED_MODULE_2__","redux_form__WEBPACK_IMPORTED_MODULE_3__","_actions_datamaster_action__WEBPACK_IMPORTED_MODULE_4__","_axios__WEBPACK_IMPORTED_MODULE_5__","_components_notification_notification__WEBPACK_IMPORTED_MODULE_6__","ModalPermintaanBarang","Component","constructor","props","super","this","state","hasilBarcode","listSupplier","stock","getBarcode","hasil","dispatch","onProgress","AxiosMasterGet","target","value","then","res","setState","data","setDetail","onFinish","catch","err","console","log","change","nama_barang","merk_barang","kwalitas","ukuran","data_supplier","map","list","kode_supplier","name","concat","nama_supplier","setStock","e","split","render","a","createElement","onSubmit","handleSubmit","onKeyPress","key","preventDefault","className","component","ReanderField","type","label","placeholder","onChange","onBlur","readOnly","loading","onSend","ReanderSelect","options","reduxForm","form","enableReinitialize","validate","values","errors","parseInt","qty","connect","datamaster"],"mappings":"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","file":"static/js/114.6fc89c2e.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { onFinish, onProgress } from \"../../../actions/datamaster_action\";\r\nimport { AxiosMasterGet } from \"../../../axios\";\r\nimport {\r\n  ReanderField,\r\n  ReanderSelect,\r\n} from \"../../../components/notification/notification\";\r\n\r\nconst validate = (values) => {\r\n  const errors = {};\r\n  if (parseInt(values.stock) < parseInt(values.qty)) {\r\n    errors.qty = \"Jumlah Melebihi stock, mohon kuragi\";\r\n  }\r\n  return errors;\r\n};\r\nclass ModalPermintaanBarang extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hasilBarcode: [],\r\n      listSupplier: [],\r\n      stock: 0,\r\n    };\r\n  }\r\n\r\n  getBarcode(hasil) {\r\n    this.props.dispatch(onProgress());\r\n    AxiosMasterGet(\r\n      \"permintaan-barang/get/BarangByBarcode/\" + hasil.target.value\r\n    )\r\n      .then((res) => this.setState({ hasilBarcode: res.data }))\r\n      .then(() => this.setDetail())\r\n      .then(() => this.props.dispatch(onFinish()))\r\n      .catch((err) => {\r\n        console.log(err);\r\n        this.props.dispatch(onFinish());\r\n      });\r\n  }\r\n\r\n  setDetail() {\r\n    this.props.change(\"nama_barang\", this.state.hasilBarcode[0].nama_barang);\r\n    this.props.change(\"merk\", this.state.hasilBarcode[0].merk_barang);\r\n    this.props.change(\"kwalitas\", this.state.hasilBarcode[0].kwalitas);\r\n    this.props.change(\"ukuran\", this.state.hasilBarcode[0].ukuran);\r\n    let listSupplier = this.state.hasilBarcode[0].data_supplier.map((list) => {\r\n      let data = {\r\n        value: list.kode_supplier + \"||\" + list.stock,\r\n        name: `${list.nama_supplier} ( ${list.kode_supplier})`,\r\n      };\r\n      return data;\r\n    });\r\n    this.setState({\r\n      listSupplier: listSupplier,\r\n    });\r\n  }\r\n  setStock(e) {\r\n    let data = e || \"0||0\";\r\n    let hasil = data.split(\"||\");\r\n    this.setState({\r\n      stock: hasil[1],\r\n    });\r\n    this.props.change(\"kode_supplier\", hasil[0]);\r\n    this.props.change(\"stock\", hasil[1]);\r\n  }\r\n  render() {\r\n    return (\r\n      <form\r\n        onSubmit={this.props.handleSubmit}\r\n        onKeyPress={(e) => {\r\n          e.key === \"Enter\" && e.preventDefault();\r\n        }}\r\n      >\r\n        <div className=\"col-lg-12\">\r\n          <div className=\"row\">\r\n            <div className=\"col-lg-6\">\r\n              <Field\r\n                name=\"kode_barcode\"\r\n                component={ReanderField}\r\n                type=\"text\"\r\n                label=\"Kode Barcode\"\r\n                placeholder=\"Masukan Kode Barcode\"\r\n                onChange={(e) => this.getBarcode(e)}\r\n                onBlur={(e) => this.getBarcode(e)}\r\n              />\r\n            </div>\r\n            <div className=\"col-lg-6\"></div>\r\n            <div className=\"col-lg-6\">\r\n              <Field\r\n                name=\"nama_barang\"\r\n                component={ReanderField}\r\n                type=\"text\"\r\n                label=\"Nama Barang\"\r\n                placeholder=\"Masukan Nama Barang\"\r\n                readOnly\r\n                loading={this.props.onSend}\r\n              />\r\n            </div>\r\n            <div className=\"col-lg-3\">\r\n              <Field\r\n                name=\"merk\"\r\n                component={ReanderField}\r\n                type=\"text\"\r\n                label=\"Merk\"\r\n                placeholder=\"Masukan Merk\"\r\n                readOnly\r\n                loading={this.props.onSend}\r\n              />\r\n            </div>\r\n            <div className=\"col-lg-3\">\r\n              <Field\r\n                name=\"kwalitas\"\r\n                component={ReanderField}\r\n                type=\"text\"\r\n                label=\"Kualitas\"\r\n                placeholder=\"Masukan Kualitas\"\r\n                readOnly\r\n                loading={this.props.onSend}\r\n              />\r\n            </div>\r\n            <div className=\"col-lg-3\">\r\n              <Field\r\n                name=\"ukuran\"\r\n                component={ReanderField}\r\n                type=\"text\"\r\n                label=\"Ukuran\"\r\n                placeholder=\"Masukan Ukuran\"\r\n                readOnly\r\n                loading={this.props.onSend}\r\n              />\r\n            </div>\r\n            <div className=\"col-lg-3\">\r\n              <Field\r\n                name=\"kode_supplier1\"\r\n                component={ReanderSelect}\r\n                options={this.state.listSupplier || []}\r\n                onChange={(e) => this.setStock(e)}\r\n                type=\"text\"\r\n                label=\"Kode Supplier\"\r\n                placeholder=\"Masukan Kode Supplier\"\r\n              />\r\n            </div>\r\n            <div className=\"col-lg-3 d-none\">\r\n              <Field\r\n                name=\"kode_supplier\"\r\n                component={ReanderField}\r\n                type=\"text\"\r\n                label=\"Kode Supplier\"\r\n                placeholder=\"Masukan Kode Supplier\"\r\n              />\r\n            </div>\r\n            <div className=\"col-lg-3\">\r\n              <Field\r\n                name=\"stock\"\r\n                component={ReanderField}\r\n                type=\"text\"\r\n                label=\"Stock\"\r\n                placeholder=\"Masukan Stock\"\r\n                readOnly\r\n                loading={this.props.onSend}\r\n              />\r\n            </div>\r\n            <div className=\"col-lg-3\">\r\n              <Field\r\n                name=\"qty\"\r\n                component={ReanderField}\r\n                type=\"text\"\r\n                label=\"Qty\"\r\n                placeholder=\"Masukan Qty\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-lg-12\">\r\n          <div className=\"text-right\">\r\n            <button className=\"btn btn-primary\">\r\n              Simpan <i className=\"fa fa-paper-plane\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nModalPermintaanBarang = reduxForm({\r\n  form: \"ModalPermintaanBarang\",\r\n  enableReinitialize: true,\r\n  validate,\r\n})(ModalPermintaanBarang);\r\nexport default connect((state) => {\r\n  return {\r\n    onSend: state.datamaster.onSend,\r\n  };\r\n})(ModalPermintaanBarang);\r\n"],"sourceRoot":""}