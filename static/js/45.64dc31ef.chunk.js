(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1047:function(a,e,t){"use strict";t.r(e);var l=t(0),n=t.n(l),r=t(7),s=t(33),o=t(132),c=t(25),m=t(197),i=t(198),p=t(209),d=t(8),u=t(34),h=t(19),g=t(79),b=t(484),_=t(24);class k extends l.Component{constructor(a){super(a),this.state={listCustomer:[],listDivisi:[],reguler:!0,member:!1,columns:[{dataField:"kode_supplier",text:"Kode Supplier"},{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"qty",text:"Qty"},{dataField:"harga_satuan",text:"Harga Satuan",formatter:a=>"".concat(parseFloat(a).toLocaleString("id-ID"))},{dataField:"diskon_rp",text:"Diskon Rp",formatter:a=>"Rp. ".concat(parseFloat(a).toLocaleString("id-ID"))},{dataField:"harga_total",text:"Total",formatter:a=>"Rp. ".concat(parseFloat(a).toLocaleString("id-ID"))}]}}getCustomer(){this.setState({member:!1,reguler:!0}),this.props.change("pelanggan",""),Object(d.b)("customer/get/all").then(a=>this.setState({listCustomer:a&&a.data.map(a=>{return{value:"".concat(a.nama_customer,"||").concat(a.alamat,"||").concat(a.handphone),name:a.nama_customer}})}))}componentDidMount(){this.props.change("tanggal",Object(u.c)()),this.getCustomer(),Object(d.b)("pegawai/get/by-kode-divisi/SLS").then(a=>this.setState({listDivisi:a&&a.data.map(a=>{return{value:"".concat(a.kode_pegawai),name:a.nama_pegawai}})})),Object(d.b)("penjualan/generate/no-trx").then(a=>this.props.change("no_faktur",a.data[0].no_faktur_jual)).catch(a=>{Object(h.j)("Gagal Ambil Faktur, Mohon Refresh"),console.log(a)})}setCustomer(a){let e=a.split("||");this.props.change("tanggal",Object(u.c)()),localStorage.setItem("penjualan_sparepart_nama_customer",e[0]),this.props.change("nama_customer",e[0]),localStorage.setItem("penjualan_sparepart_alamat",e[1]),this.props.change("alamat",e[1]),localStorage.setItem("penjualan_sparepart_telepon",e[2]),this.props.change("telepon",e[2])}DeleteTukar(){null!==localStorage.getItem("tukarSparepart_temp")&&(localStorage.removeItem("tukarSparepart_temp"),Object(h.i)("Tukar Berhasil Dihapus"),this.props.dispatch(Object(_.s)()))}getMember(){this.setState({member:!0,reguler:!1}),this.props.change("pelanggan",""),Object(d.b)("member/get-member-all").then(a=>this.setState({listCustomer:a&&a.data.map(a=>{return{value:"".concat(a.nama_customer,"||").concat(a.alamat,"||").concat(a.handphone),name:a.nama_customer}})})).catch(()=>Object(h.h)("Error Get Member"))}render(){return n.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()}},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(m.a,{name:"tanggal",component:h.c,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal",validate:b.a})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(m.a,{name:"no_faktur",component:h.c,type:"text",label:"No Faktur",placeholder:"Masukan No Faktur",readOnly:!0})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement("label",{className:"mb-4"},"Jenis Penjualan"),n.a.createElement("div",null,n.a.createElement("label",null,n.a.createElement(m.a,{name:"jenis_penjualan",component:"input",type:"radio",value:"member",className:"mr-3",onClick:()=>this.getMember(),checked:this.state.member}),"Member"),n.a.createElement("label",{className:"ml-3"},n.a.createElement(m.a,{name:"jenis_penjualan",component:"input",type:"radio",value:"reguler",className:"mr-3",onClick:()=>this.getCustomer(),checked:this.state.reguler}),"Reguler"))),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(m.a,{name:"kode_sales",component:h.e,options:this.state.listDivisi,type:"text",label:"Sales",placeholder:"Masukan Sales",onChange:a=>localStorage.setItem("penjualan_sparepart_kode_sales",a)})),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement(m.a,{name:"pelanggan",component:h.e,options:this.state.listCustomer,type:"text",label:"Pelanggan",placeholder:"Masukan Pelanggan",onChange:a=>this.setCustomer(a),validate:b.a})),n.a.createElement("div",{className:"col-lg-4 d-none"},n.a.createElement(m.a,{name:"nama_customer",component:h.c,type:"text",label:"CUSTOMER",placeholder:"Masukan CUSTOMER",readOnly:!0})),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement(m.a,{name:"alamat",component:h.c,type:"text",label:"Alamat",placeholder:"Masukan Alamat",readOnly:!0})),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement(m.a,{name:"telepon",component:h.c,type:"text",label:"Telepon",placeholder:"Masukan Telepon",readOnly:!0})),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-lg-6 text-center"},n.a.createElement(m.a,{name:"kode_barcode",component:h.c,type:"text",label:"Kode Barcode",placeholder:"Masukan Kode Barcode"})),n.a.createElement("div",{className:"col-lg-2"},n.a.createElement("label",{htmlFor:""},"."),n.a.createElement("button",{className:"btn btn-block btn-primary",type:"button",onClick:()=>this.props.setCariBarang("TAMBAH")},"Cari Barang ",n.a.createElement("i",{className:"fa fa-search ml-3"}))))),n.a.createElement("div",{className:"col-lg-12 mt-3"},n.a.createElement(g.a,{keyField:"kode_barang",data:this.props.listBarangSparepart||[],columns:this.state.columns,emptyText:"Silahkan tambahkan Barang",empty:!0})),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"text-left"},n.a.createElement("button",{className:"btn btn-danger mr-3",type:"button",onClick:()=>this.DeleteTukar()},"Hapus Barang Tukar",n.a.createElement("i",{className:"fa fa-trash ml-3"})))),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"text-center"},n.a.createElement("h4",null,"Total Tukar : "),n.a.createElement("h3",null,"Rp.",parseFloat(this.props.totalTukar).toLocaleString("id-ID")))),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-green mr-3",type:"button",onClick:()=>this.props.setCariBarang("TUKAR")},"Tukar Barang ",n.a.createElement("i",{className:"fa fa-exchange-alt ml-3"})),n.a.createElement("button",{className:"btn btn-primary"},"Bayar ",n.a.createElement("i",{className:"fa fa-money-bill-alt ml-3"}))))))))}}k=Object(i.a)({form:"HeadPenjualanSparepart",enableReinitialize:!0})(k);const E=Object(p.a)("HeadPenjualanSparepart");var v=Object(c.b)(a=>({initialValues:{no_faktur:localStorage.getItem("no_penjualan_sparepart")||"",nama_customer:localStorage.getItem("penjualan_sparepart_nama_customer")||"",alamat:localStorage.getItem("penjualan_sparepart_alamat")||"",telepon:localStorage.getItem("penjualan_sparepart_telepon")||"",pelanggan:"".concat(localStorage.getItem("penjualan_sparepart_nama_customer"),"||").concat(localStorage.getItem("penjualan_sparepart_alamat"),"||").concat(localStorage.getItem("penjualan_sparepart_telepon"))||"",kode_sales:localStorage.getItem("penjualan_sparepart_kode_sales")||""},listBarangSparepart:a.transaksi.listBarangSparepart,totalTukar:a.transaksi.totalTukar,jenis_penjualan:E(a,"jenis_penjualan")}))(k),N=t(486);const S=Object(N.createNumberMask)({prefix:"Rp. ",locale:"id-ID"});class y extends l.Component{constructor(a){super(a),this.state={}}setSubTotal(){this.props.change("sub_total",this.props.sub_total)}setGrandTotal(){this.props.change("grand_total",this.props.grand_total)}render(){return n.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()}},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(m.a,{name:"nama_barang",component:h.d,type:"text",label:"Nama Barang",placeholder:"Masukan Nama Barang",readOnly:!0})),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(m.a,{name:"merk",component:h.d,type:"text",label:"Merk",placeholder:"Masukan Merk",readOnly:!0})),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(m.a,{name:"kode_barcode",component:h.d,type:"text",label:"",placeholder:"Masukan "})),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(m.a,{name:"kwalitas",component:h.d,type:"text",label:"Kualitas",placeholder:"Masukan Kualitas",readOnly:!0})),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(m.a,{name:"ukuran",component:h.d,type:"text",label:"Ukuran",placeholder:"Masukan Ukuran",readOnly:!0})),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(m.a,{name:"satuan",component:h.d,type:"text",label:"Satuan",placeholder:"Masukan Satuan",readOnly:!0}))),n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(m.a,Object.assign({name:"harga_satuan",component:h.d,type:"telp",label:"Harga Satuan",placeholder:"Masukan Harga Satuan",readOnly:!0},S))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(m.a,{name:"jumlah",component:h.d,type:"telp",label:"Jumlah",placeholder:"Masukan Jumlah",onChange:this.setSubTotal()})),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(m.a,Object.assign({name:"sub_total",component:h.d,type:"telp",label:"Sub Total",placeholder:"Masukan Sub Total"},S,{readOnly:!0}))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(m.a,Object.assign({name:"discount",component:h.d,type:"text",label:"TAMBAH"===this.props.jenis_barang?"Discount / PCS":"Potongan / PCS",placeholder:"Masukan Discount"},S,{onChange:this.setGrandTotal()}))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(m.a,Object.assign({name:"grand_total",component:h.d,type:"text",label:"Grand Total",placeholder:"Masukan Grand Total"},S,{readOnly:!0})))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-primary"},"Simpan ",n.a.createElement("i",{className:"fa fa-paper-plane ml-2"})))))))}}y=Object(i.a)({form:"ModalDetailBarangSparepart",enableReinitialize:!0})(y);const j=Object(p.a)("ModalDetailBarangSparepart");var f=Object(c.b)(a=>{const e=j(a,"jumlah","discount","harga_satuan"),t=e.jumlah,l=e.discount,n=e.harga_satuan;return{initialValues:{kode_kategori:a.datamaster.databarang.kode_kategori,kode_barcode:a.datamaster.databarang.kode_barcode,jenis_barang:a.datamaster.databarang.kode_jenis,kode_barang:a.datamaster.databarang.kode_barang,nama_barang:a.datamaster.databarang.nama_barang,merk:a.datamaster.databarang.kode_merk_barang,ukuran:a.datamaster.databarang.kode_ukuran,kwalitas:a.datamaster.databarang.kode_kwalitas,type:a.datamaster.databarang.type,rak:a.datamaster.databarang.kode_lokasi_rak,selving:a.datamaster.databarang.kode_lokasi_selving,harga_satuan:a.datamaster.databarang.harga_jual,satuan:a.datamaster.databarang.kode_satuan},sub_total:parseFloat(n||0)*parseFloat(t||0),total_discount:parseFloat(t||0)*parseFloat(l||0),grand_total:parseFloat(n||0)*parseFloat(t||0)-parseFloat(t||0)*parseFloat(l||0)}})(y),O=t(95),C=t.n(O),F=t(5);class x extends l.Component{constructor(a){super(a),this.state={supplier:!1,columns:[{dataField:"kode_barang",text:"Kode Barang"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"kode_merk_barang",text:"Merk"},{dataField:"kode_satuan",text:"Satuan"},{dataField:"harga_jual",text:"Harga"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e)=>{let t={kode_barcode:e.kode_barcode,kode_barang:e.kode_barang,nama_barang:e.nama_barang,kode_kategori:e.kode_kategori,kode_jenis:e.kode_jenis,kode_merk_barang:e.kode_merk_barang,kode_kwalitas:e.kode_kwalitas,kode_lokasi_rak:e.kode_lokasi_rak,kode_lokasi_selving:e.kode_lokasi_selving,kode_ukuran:e.kode_ukuran,kode_satuan:e.kode_satuan,type:e.type,harga_jual:e.harga_jual};return n.a.createElement("div",{className:"row text-center"},n.a.createElement("div",{className:"col-12"},n.a.createElement("button",{className:"btn btn-teal mr-3",onClick:()=>this.detail(t)},"Tambah",n.a.createElement("i",{className:"fa fa-cart-arrow-down ml-2"}))))}}]}}detail(a){this.props.showDetail(),this.props.dispatch(Object(F.ab)(a))}componentDidMount(){this.props.dispatch(Object(F.wb)()),this.props.dispatch(Object(F.Qb)())}render(){return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"text-left"},n.a.createElement("button",{className:"btn btn-black",onClick:this.props.setBack},n.a.createElement("i",{className:"fa fa-chevron-left mr-3"})," Back"))),n.a.createElement("div",{className:"col-lg-2"}),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement(m.a,{name:"kode_supplier",component:h.e,options:this.props.listsupplier.map(a=>{return{value:a.kode_supplier,name:a.nama_supplier}}),onChange:a=>{this.setState({supplier:a}),this.props.change("search_value",""),localStorage.setItem("supplier_barang_sparepart",a)},type:"text",label:"Kode Supplier",validate:b.a,placeholder:"Masukan Kode Supplier"})),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement(m.a,{name:"search_value",component:h.e,options:this.props.listbarang.map(a=>{return{value:a.kode_barang,name:a.nama_barang}}),onChange:a=>{this.state.supplier?this.setState({kode_barang:a}):Object(h.j)("Silahkan Pilih Supplier Terlebih Dahulu")},type:"text",label:"Pencarian",placeholder:"Masukan Pencarian"})),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(C.a,{bootstrap4:!0,keyField:"id",data:this.props.listbarang.filter(a=>a.kode_barang===this.state.kode_barang),columns:this.state.columns,noDataIndication:"Belum ada Data"})))}}x=Object(i.a)({form:"ModalPenjualanSparepart",enableReinitialize:!0})(x);var M=Object(c.b)(a=>({listbarang:a.datamaster.listbarang,listsupplier:a.datamaster.listsupplier}))(x),B=t(505);const I=Object(N.createNumberMask)({prefix:"Rp. ",locale:"id-ID"});class T extends l.Component{constructor(a){super(a),this.state={}}componentDidMount(){this.props.change("grand_total_all",this.props.total),this.props.dispatch(Object(_.x)())}setBayar(a){this.setState({bayar:a.target.value}),localStorage.setItem("bayar_rp_rongsok",a.target.value)}render(){return n.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()}},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-12 mb-3"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"text-left"},n.a.createElement("button",{className:"btn btn-black text-white",onClick:this.props.backMenu},n.a.createElement("i",{className:"fa fa-chevron-left mr-3"})," Back")))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-6 text-center"},n.a.createElement("h3",null,"Grand Total"),n.a.createElement("p",{style:{fontSize:32,fontWeight:700}},parseFloat(this.props.grand_total_all).toLocaleString("id-ID")),n.a.createElement("h3",null,"Total Tukar"),n.a.createElement("p",{style:{fontSize:32,fontWeight:700}},parseFloat(this.props.totalTukar).toLocaleString("id-ID")),n.a.createElement("h3",null,"Bayar"),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-3"}),n.a.createElement("div",{className:"col-lg-6 text-center"},n.a.createElement(m.a,Object.assign({name:"bayar",component:h.c,type:"telp",placeholder:"Masukan Bayar",className:" form-control-lg",onChange:a=>this.setBayar(a)},I,{readOnly:this.props.piutangCheck}))))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-3"}),n.a.createElement("div",{className:"col-lg-6 text-center"},n.a.createElement("label",{htmlFor:""},"Masuk Piutang ?"),n.a.createElement(m.a,{name:"piutang",component:"input",type:"checkbox",placeholder:"Masukan Bayar",className:"ml-3"})))),n.a.createElement("h3",null,"Kembali"),n.a.createElement("p",{style:{fontSize:35,fontWeight:700}},parseFloat(this.props.kembali).toLocaleString("id-ID"))),n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(g.a,{keyField:"no_ac",data:this.props.listPembayaran_temp,columns:this.props.columns,tambahData:!0,handleClick:this.props.showCC})))))),n.a.createElement("div",{className:"text-center col-lg-6"},n.a.createElement("button",{className:"btn btn-primary",disabled:this.props.onSend},this.props.onSend?n.a.createElement(n.a.Fragment,null,n.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):n.a.createElement(n.a.Fragment,null,"Simpan ",n.a.createElement("i",{className:"fa fa-paper-plane ml-3 "}))))))}}T=Object(i.a)({form:"ModalBayarSparepart",enableReinitialize:!0,validate:a=>{let e={};return a.bayar||a.piutang||null!==localStorage.getItem("listPembayaran_temp")||(e.bayar="Tidak boleh Kosong"),e}})(T);const D=Object(p.a)("ModalBayarSparepart");var P=Object(c.b)(a=>(localStorage.setItem("bayar_rp_rongsok",D(a,"bayar")||0),localStorage.setItem("kembalian_bayar",(D(a,"bayar")||0)-a.transaksi.total_bayar+a.transaksi.totalTukar+a.transaksi.sum_pembayaran),{grand_total_all:a.transaksi.total_bayar,listPembayaran_temp:a.transaksi.listpembayaran_temp,sum_pembayaran:a.transaksi.sum_pembayaran,totalTukar:a.transaksi.totalTukar,kembali:(D(a,"bayar")||0)-a.transaksi.total_bayar+a.transaksi.totalTukar+a.transaksi.sum_pembayaran,bayar:D(a,"bayar")||0,onSend:a.datamaster.onSend,piutangCheck:D(a,"piutang")||!1}))(T),w=t(42);e.default=Object(c.b)(a=>({listBarangSparepart:a.transaksi.listBarangSparepart,grand_total_all:a.transaksi.total_bayar,sum_pembayaran:a.transaksi.sum_pembayaran,totalTukar:a.transaksi.totalTukar,noFaktur:a.datamaster.noFaktur}))(class extends l.Component{constructor(a){super(a),this.state={cari_barang:!1,bayar:!1,columnsListBayar:[{dataField:"jenis_trx",text:"Jenis Bayar"},{dataField:"no_card",text:"Bank"},{dataField:"nama_pemilik",text:"Nama Pemilik"},{dataField:"fee_rp",text:"Fee Card"},{dataField:"bayar_rp",text:"Bayar",formatter:a=>"Rp. ".concat(parseFloat(a).toLocaleString("id-ID"))},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e,t)=>(this.setState({}),n.a.createElement("div",{className:"row text-center"},n.a.createElement("div",{className:"col-12"},n.a.createElement("button",{onClick:()=>{let a=JSON.parse(localStorage.getItem("listPembayaran_temp"));a.splice(t,1),localStorage.setItem("listPembayaran_temp",JSON.stringify(a)),this.props.dispatch(Object(_.x)())},className:"btn btn-danger"},"Hapus",n.a.createElement("i",{className:"fa fa-trash ml-2"})))))}]}}handleSubmit(a){if(null===localStorage.getItem("barangSparepart_temp"))return Object(h.h)("Barang Tidak Boleh Kosong"),!1;this.setState({bayar:!0});let e={no_faktur_jual:a.no_faktur,tanggal:a.tanggal,sales_id:a.kode_sales,nama_customer:a.nama_customer,alamat:a.alamat,telepon:a.telepon,status_masuk_piutang:a.no_faktur,grand_total:this.props.grand_total_all,tukar_rp:this.props.totalTukar,no_ref_cash:this.props.noFaktur,detail_barang:JSON.parse(localStorage.getItem("barangSparepart_temp")),detail_tukar:JSON.parse(localStorage.getItem("tukarSparepart_temp"))||[]};localStorage.setItem("headSparepart",JSON.stringify(e))}sendData(a){this.props.dispatch(Object(F.Vb)());let e=JSON.parse(localStorage.getItem("headSparepart"))||[];e.cash_rp=a.bayar||0,e.status_masuk_piutang=void 0!==a.piutang,e.detail_non_tunai="[]"===localStorage.getItem("listPembayaran_temp")?[{no_ref:"-",no_ac:"-",bayar_rp:0,fee_rp:0,no_card:"-",valid_until:"-",nama_pemilik:"-",no_ktp:"-",alamat_ktp:"-",kota_ktp:"-",telepon_ktp:"-",jenis_trx:"-"}]:null!==localStorage.getItem("listPembayaran_temp")?JSON.parse(localStorage.getItem("listPembayaran_temp")):[{no_ref:"-",no_ac:"-",bayar_rp:0,fee_rp:0,no_card:"-",valid_until:"-",nama_pemilik:"-",no_ktp:"-",alamat_ktp:"-",kota_ktp:"-",telepon_ktp:"-",jenis_trx:"-"}],console.log(e),Object(d.c)("penjualan/post-transaksi",e).then(()=>Object(h.b)("Transaksi Berhasil, Terima Kasih..")).then(()=>Object(u.d)(["barangSparepart_temp","supplier_barang_sparepart","no_penjualan_sparepart","supplier_barang_sparepart","headSparepart","bayar_rp_rongsok","penjualan_sparepart_nama_customer","penjualan_sparepart_alamat","penjualan_sparepart_telepon","penjualan_sparepart_kode_sales","noFaktur","tukarSparepart_temp","listPembayaran_temp"])).then(()=>this.setBack()).then(()=>this.props.dispatch(Object(_.s)())).then(()=>this.props.dispatch(Object(F.Ab)())).then(()=>this.props.dispatch(Object(w.a)("HeadPenjualanSparepart"))).then(()=>this.props.dispatch(Object(F.Ub)())).catch(a=>Object(h.h)("Gagal Menambah Data, Error : ".concat(a.response.data)).then(()=>this.props.dispatch(Object(F.Ub)())))}setCariBarang(a){console.log(a),this.setState({cari_barang:!0,jenis_barang:a})}setBack(){this.setState({cari_barang:!1,bayar:!1})}showCC(){this.props.dispatch(Object(F.Wb)()),this.setState({jenisModal:"CC"})}handleSimpanCC(a){let e={no_ref:this.props.noFaktur,no_card:a.no_card,bayar_rp:a.grand_total,fee_rp:a.fee_card,no_ac:"".concat(a.bank),valid_until:a.expiry,nama_pemilik:a.name,no_ktp:a.no_ktp,alamat_ktp:a.alamat_ktp,kota_ktp:a.kota,telepon_ktp:a.handphone,jenis_trx:a.jenis_trx||"DEBIT"},t=JSON.parse(localStorage.getItem("listPembayaran_temp"))||[];t.push(e),localStorage.setItem("listPembayaran_temp",JSON.stringify(t)),Object(h.i)("Berhasil Menambahkan Data"),this.props.dispatch(Object(_.x)()),localStorage.removeItem("noFaktur"),this.props.dispatch(Object(F.Ab)())}showDetail(){this.props.dispatch(Object(F.Wb)()),this.setState({jenisModal:"DETAIL"})}componentDidMount(){this.props.dispatch(Object(F.Ab)()),Object(d.b)("penjualan/generate/no-trx").then(a=>localStorage.setItem("no_penjualan_sparepart",a.data[0].no_faktur_jual)).catch(a=>{Object(h.j)("Gagal Ambil Faktur, Mohon Refresh"),console.log(a)}),this.props.dispatch(Object(_.s)())}handleTambahBarang(a){let e="";if("TAMBAH"===this.state.jenis_barang){e="barangSparepart_temp";let t=JSON.parse(localStorage.getItem(e))||[],l=t.findIndex(e=>e.kode_barcode===a.kode_barcode);if(-1!==l){let n={kode_supplier:localStorage.getItem("supplier_barang_sparepart")||"",kode_barcode:a.kode_barcode,qty:parseFloat(a.jumlah)+parseFloat(t[l].qty),harga_satuan:parseFloat(a.harga_satuan),diskon_rp:parseFloat(a.discount||0),harga_total:parseFloat(a.grand_total)+parseFloat(t[l].harga_total)};t.splice(l,1),t.push(n),localStorage.setItem(e,JSON.stringify(t)),Object(h.i)("Barang Berhasil Ditambahkan"),this.props.dispatch(Object(_.s)()),this.props.dispatch(Object(w.a)("ModalDetailBarangSparepart")),this.setBack()}else{let l={kode_supplier:localStorage.getItem("supplier_barang_sparepart")||"",kode_barcode:a.kode_barcode,qty:parseFloat(a.jumlah),harga_satuan:parseFloat(a.harga_satuan),diskon_rp:parseFloat(a.discount||0),harga_total:parseFloat(a.grand_total)};t.push(l),localStorage.setItem(e,JSON.stringify(t)),Object(h.i)("Barang Berhasil Ditambahkan"),this.props.dispatch(Object(_.s)()),this.props.dispatch(Object(w.a)("ModalDetailBarangSparepart")),this.props.dispatch(Object(F.Tb)()),this.setBack()}}else{e="tukarSparepart_temp";let t=JSON.parse(localStorage.getItem(e))||[],l=t.findIndex(e=>e.kode_barcode===a.kode_barcode);if(-1!==l){let n={kode_supplier:localStorage.getItem("supplier_barang_sparepart")||"",kode_barcode:a.kode_barcode,qty:parseFloat(a.jumlah)+parseFloat(t[l].qty),harga_satuan:parseFloat(a.harga_satuan),potongan:parseFloat(a.discount||0),harga_total:parseFloat(a.grand_total)+parseFloat(t[l].harga_total)};t.splice(l,1),t.push(n),localStorage.setItem(e,JSON.stringify(t)),Object(h.i)("Barang Berhasil Ditambahkan"),this.props.dispatch(Object(_.s)()),this.props.dispatch(Object(w.a)("ModalDetailBarangSparepart")),this.props.dispatch(Object(F.Tb)()),this.setBack()}else{let l={kode_supplier:localStorage.getItem("supplier_barang_sparepart")||"",kode_barcode:a.kode_barcode,qty:parseFloat(a.jumlah),harga_satuan:parseFloat(a.harga_satuan),potongan:parseFloat(a.discount||0),harga_total:parseFloat(a.grand_total)};t.push(l),localStorage.setItem(e,JSON.stringify(t)),Object(h.i)("Barang Berhasil Ditambahkan"),this.props.dispatch(Object(_.s)()),this.props.dispatch(Object(w.a)("ModalDetailBarangSparepart")),this.setBack()}}}render(){return n.a.createElement("div",null,n.a.createElement("ol",{className:"breadcrumb float-xl-right"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(r.b,{to:"#"},"Transaksi")),n.a.createElement("li",{className:"breadcrumb-item active"},"Penjualan Sparepart")),n.a.createElement("h1",{className:"page-header"},"Penjualan Sparepart "),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(s.a,null,n.a.createElement(s.c,null,"Penjualan Sparepart"),n.a.createElement(s.b,null,n.a.createElement("br",null),this.state.cari_barang?n.a.createElement(M,{setBack:()=>this.setBack(),showDetail:()=>this.showDetail()}):this.state.bayar?n.a.createElement(P,{showCC:()=>this.showCC(),columns:this.state.columnsListBayar,data:this.state.dataListBayar,backMenu:()=>this.setState({bayar:!1}),onSubmit:a=>this.sendData(a)}):n.a.createElement(v,{onSubmit:a=>this.handleSubmit(a),setCariBarang:a=>this.setCariBarang(a),setBayar:()=>this.setBayar()}),n.a.createElement("br",null))),n.a.createElement(o.a,{title:"DETAIL"===this.state.jenisModal?"Detail Barang":"CC"===this.state.jenisModal?"Credit Card":null,content:"DETAIL"===this.state.jenisModal?n.a.createElement(f,{jenis_barang:this.state.jenis_barang,onSubmit:a=>this.handleTambahBarang(a)}):"CC"===this.state.jenisModal?n.a.createElement(B.a,{onSubmit:a=>this.handleSimpanCC(a)}):null}))))}})},484:function(a,e,t){"use strict";t.d(e,"a",function(){return l});const l=a=>a?void 0:"Tidak Boleh Kosong"},505:function(a,e,t){"use strict";var l=t(0),n=t.n(l),r=t(530),s=(t(531),t(25)),o=t(197),c=t(198),m=t(209),i=t(486),p=t(8),d=t(19);const u=Object(i.createNumberMask)({prefix:"Rp. ",locale:"id-ID"});class h extends l.Component{constructor(a){super(a),this.handleInputFocus=(a=>{this.setState({focus:a.target.name})}),this.handleInputChange=(a=>{const e=a.target,t=e.name,l=e.value;this.setState({[t]:l}),this.props.change(t,l)}),this.state={cvc:"",expiry:"",focus:"",name:"",no_card:"",nav1:"nav-item nav-link active",nav2:"nav-item nav-link",nav3:"nav-item nav-link",listBank:[]}}componentDidMount(){Object(p.b)("bank/get/all").then(a=>this.setState({listBank:a&&a.data.map(a=>{return{value:a.no_ac,name:"".concat(a.atas_nama," / ").concat(a.nama_bank)}})}))}setTotal(){this.props.change("fee_card",this.props.fee_card),this.props.change("total_card",this.props.total)}render(){return n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(r.a,{cvc:this.state.cvc,expiry:this.state.expiry,focused:this.state.focus,name:this.state.name,number:this.state.no_card}),n.a.createElement("form",{onSubmit:this.props.handleSubmit,className:"mt-3"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("nav",{className:"nav nav-pills nav-fill"},n.a.createElement("button",{type:"button",className:this.state.nav1,onClick:()=>{this.setState({nav1:"nav-item nav-link active",nav2:"nav-item nav-link",nav3:"nav-item nav-link"}),this.props.change("jenis_trx","DEBIT")}},"DEBIT"),n.a.createElement("button",{type:"button",className:this.state.nav2,onClick:()=>{this.setState({nav1:"nav-item nav-link ",nav2:"nav-item nav-link active",nav3:"nav-item nav-link"}),this.props.change("jenis_trx","CARD")}},"CREDIT"),n.a.createElement("button",{type:"button",className:this.state.nav3,onClick:()=>{this.setState({nav1:"nav-item nav-link ",nav2:"nav-item nav-link",nav3:"nav-item nav-link active"}),this.props.change("jenis_trx","TRANSFER")}},"TRANSFER"))),n.a.createElement("div",{className:"col-lg-12 mb-2 mt-2"},n.a.createElement("h4",null,"Data Kartu")),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"No.Card"),n.a.createElement("input",{type:"tel",className:"form-control",name:"no_card",placeholder:"Card Number",onChange:this.handleInputChange,onFocus:this.handleInputFocus}))),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(o.a,{name:"no_card",component:d.c,type:"telp",label:"No.Card",placeholder:"Masukan No.Card",onChange:this.handleInputChange,onFocus:this.handleInputFocus})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"Valid Until"),n.a.createElement("input",{type:"tel",className:"form-control",name:"expiry",placeholder:"MM/YY",onChange:this.handleInputChange,onFocus:this.handleInputFocus}))),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(o.a,{name:"expiry",component:d.c,type:"telp",label:"Valid until ( MM/YY )",placeholder:"Masukan Valid until ( MM/YY )",onChange:this.handleInputChange,onFocus:this.handleInputFocus})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"Nama Pemilik"),n.a.createElement("input",{type:"tel",className:"form-control",name:"name",placeholder:"Nama Pemilik",onChange:this.handleInputChange,onFocus:this.handleInputFocus}))),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(o.a,{name:"name",component:d.c,type:"text",label:"Nama Pemilik",placeholder:"Masukan Nama Pemilik",onChange:this.handleInputChange,onFocus:this.handleInputFocus})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"CVC / CVV"),n.a.createElement("input",{type:"tel",className:"form-control",name:"cvc",placeholder:"Nama Pemilik",onChange:this.handleInputChange,onFocus:this.handleInputFocus}))),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(o.a,{name:"cvc",component:d.c,type:"text",label:"Nama Pemilik",placeholder:"Masukan Nama Pemilik",onChange:this.handleInputChange,onFocus:this.handleInputFocus})),n.a.createElement("div",{className:"col-lg-12 mb-2"},n.a.createElement("h4",null,"Data Pemilik")),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(o.a,{name:"no_ktp",component:d.c,type:"number",label:"Nomor KTP",placeholder:"Masukan Nomor KTP"})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(o.a,{name:"alamat_ktp",component:d.c,type:"text",label:"Alamat KTP",placeholder:"Masukan Alamat KTP"})),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(o.a,{name:"jenis_trx",component:d.c,type:"text",label:"Jenis Transaksi",placeholder:"Masukan Jenis Transaksi"})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(o.a,{name:"kota",component:d.c,type:"text",label:"Kota",placeholder:"Masukan Kota"})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(o.a,{name:"handphone",component:d.c,type:"telp",label:"Handphone",placeholder:"Masukan Handphone"})),n.a.createElement("div",{className:"col-lg-12 mb-2"},n.a.createElement("h4",null,"Data Harga")),n.a.createElement("div",{className:"col-lg-2"},n.a.createElement(o.a,{name:"bank",component:d.e,options:this.state.listBank,label:"Bank",placeholder:"Masukan Bank"})),n.a.createElement("div",{className:"col-lg-2"},n.a.createElement(o.a,Object.assign({name:"sub_total",component:d.c,type:"text",label:"Sub Total",placeholder:"Masukan Sub Total",readOnly:!0},u))),n.a.createElement("div",{className:"col-lg-2"},n.a.createElement(o.a,Object.assign({name:"grand_total",component:d.c,type:"telp",label:"Grand Total",placeholder:"Masukan Grand Total"},u))),n.a.createElement("div",{className:"col-lg-1"},n.a.createElement(o.a,{name:"fee_card_percent",component:d.c,type:"number",label:"% Card",placeholder:"0",onChange:this.setTotal()})),n.a.createElement("div",{className:"col-lg-2"},n.a.createElement(o.a,Object.assign({name:"fee_card",component:d.c,type:"telp",label:"Fee Card",placeholder:"0"},u))),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(o.a,Object.assign({name:"total_card",component:d.c,type:"telp",label:"Card + Fee",placeholder:"Masukan Card + Fee"},u))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-primary"},"Simpan ",n.a.createElement("i",{className:"fa fa-paper-plane"})))))))}}h=Object(c.a)({form:"ModalCC",enableReinitialize:!0,validate:a=>{const e={};return a.grand_total>a.sub_total&&(e.grand_total="Pembayaran Tidak Boleh Lebih Dari Sub Total"),e}})(h);const g=Object(m.a)("ModalCC");e.a=Object(s.b)(a=>{const e=g(a,"grand_total","fee_card_percent"),t=e.grand_total,l=e.fee_card_percent;return{fee_card:parseFloat(t||0)*(parseFloat(l||0)/100),total:parseFloat(t||0)+parseFloat(t||0)*(parseFloat(l||0)/100),sub_total:a.transaksi.sub_total,initialValues:{sub_total:Math.abs(localStorage.getItem("kembalian_bayar")||0)}}})(h)}}]);
//# sourceMappingURL=45.64dc31ef.chunk.js.map