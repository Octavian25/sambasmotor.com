(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1032:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(7),s=t(29),i=t(23),o=t(41),c=t(30),m=t(555),p=t.n(m),d=t(557),g=t(134),u=t(9),h=t(33),b=t(94),k=t.n(b),E=t(122);a.default=Object(s.b)(e=>({permintaan_temp:e.stocking.permintaan_temp,pengeluaran_selected:e.stocking.pengeluaran_selected,pengeluaran:e.stocking.pengeluaran,onSend:e.datamaster.onSend}),null)(class extends n.a.Component{constructor(e){super(e),this.state={isEdit:!1,modalDialog:!1,isLoading:!1,listPengeluaran:"",listPenerimaan:[],step:0,step1:"row",step2:"row d-none",columns:[{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_supplier",text:"Kode Supplier"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"merk_barang",text:"Merk barang"},{dataField:"kwalitas",text:"Kualitas"},{dataField:"ukuran",text:"Ukuran"},{dataField:"qty",text:"Qty"}],columns2:[{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_supplier",text:"Kode Supplier",sort:!0},{dataField:"qty",text:"Qty"}]}}componentDidMount(){localStorage.setItem("FakturTerpilih","[]"),localStorage.setItem("FakturTerpilih_detail","[]"),Object(u.b)("pengeluaran-barang/generate/no-trx").then(e=>this.setState({listPengeluaran:e.data[0].no_pengeluaran,tanggal:Object(h.c)()})),this.props.dispatch(Object(c.l)())}nextStep(){switch(this.state.step){case 0:this.setState({step:this.state.step+1,step1:"row d-none",step2:"row"}),this.props.dispatch(Object(c.l)())}}prevStep(){switch(this.state.step){case 1:this.setState({step:this.state.step-1,step1:"row ",step2:"row d-none"})}}handleValidasi(e){if(null===localStorage.getItem("FakturTerpilih"))return Object(i.a)("Faktur Terpilih Kosong"),!1;let a=JSON.parse(localStorage.getItem("FakturTerpilih_detail"))||[],t={no_pengeluaran:this.state.listPengeluaran,tanggal:this.state.tanggal,no_bon:this.state.nomor_pb,detail_barang:JSON.parse(localStorage.getItem("FakturTerpilih"))},l=[];a.forEach((e,a)=>{let t=[++a,e.kode_barcode,e.nama_barang,e.merk_barang,e.kwalitas,e.ukuran,e.qty];l.push(t)});let n=["NO","BARCODE","NAMA BARANG","MERK","KW","UKURAN","QTY"];Object(u.c)("pengeluaran-barang/post-transaksi",t).then(()=>Object(i.b)("Berhasil Menyimpan data")).then(()=>Object(g.a)("Tanggal",this.state.tanggal,"","","NO PENGELUARAN",this.state.listPengeluaran,"","","ADMIN","01-28-2021","ADMIN",n,"BUKTI PENGELUARAN BARANG",l,[],!0)).then(()=>Object(h.d)(["FakturTerpilih","FakturTerpilih_detail"])).then(()=>this.props.dispatch(Object(c.k)())).then(()=>this.prevStep()).then(()=>this.setState({step:0}))}getPermintaan(e){this.props.dispatch(Object(c.k)(this.state.nomor_pb))}render(){const e={mode:"checkbox",clickToSelect:!0,onSelect:(e,a,t,l)=>{console.log(e.noFaktur);let n=JSON.parse(localStorage.getItem("FakturTerpilih"))||[],r=JSON.parse(localStorage.getItem("FakturTerpilih_detail"))||[];const s={kode_supplier:e.kode_supplier,kode_barcode:e.kode_barcode,qty:e.qty},i={kode_barcode:e.kode_barcode,kode_supplier:e.kode_supplier,nama_barang:e.nama_barang,merk_barang:e.merk_barang,kwalitas:e.kwalitas,ukuran:e.ukuran,qty:e.qty};if(a){var o=n.findIndex((a,t)=>a.kode_barcode===e.kode_barcode),c=r.findIndex((a,t)=>a.kode_barcode===e.kode_barcode);o<0?(n.push(s),r.push(i)):(n.splice(o,1),r.splice(c,1)),localStorage.setItem("FakturTerpilih",JSON.stringify(n)),localStorage.setItem("FakturTerpilih_detail",JSON.stringify(r))}else{var m=n.findIndex((a,t)=>a.kode_barcode===e.kode_barcode),p=r.findIndex((a,t)=>a.kode_barcode===e.kode_barcode);n.splice(m,1),r.splice(p,1),localStorage.setItem("FakturTerpilih",JSON.stringify(n)),localStorage.setItem("FakturTerpilih_detail",JSON.stringify(r))}},onSelectAll:(e,a,t)=>{var l=[],n=[];a.forEach(function(e){const a={kode_supplier:e.kode_supplier,kode_barcode:e.kode_barcode,qty:e.qty},t={kode_barcode:e.kode_barcode,kode_supplier:e.kode_supplier,nama_barang:e.nama_barang,merk_barang:e.merk_barang,kwalitas:e.kwalitas,ukuran:e.ukuran,qty:e.qty};l.push(a),n.push(t)}),e?(localStorage.setItem("FakturTerpilih",JSON.stringify(l)),localStorage.setItem("FakturTerpilih_detail",JSON.stringify(n))):(localStorage.removeItem("FakturTerpilih"),localStorage.removeItem("FakturTerpilih_detail"))}};return n.a.createElement("div",null,n.a.createElement("ol",{className:"breadcrumb float-xl-right"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(r.b,{to:"#"},"Stocking")),n.a.createElement("li",{className:"breadcrumb-item active"},"Pengeluaran Barang")),n.a.createElement("h1",{className:"page-header"},"Pengeluaran Barang "),n.a.createElement(o.a,null,n.a.createElement(o.c,null,"Pengeluaran Barang"),n.a.createElement("br",null),n.a.createElement(o.b,null,n.a.createElement("div",{className:"mb-3"},n.a.createElement(p.a,{steps:[{title:"Pilih Faktur"},{title:"Data Terpilih"}],activeStep:this.state.step})),n.a.createElement("div",{className:this.state.step1},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"No Pengeluaran"),n.a.createElement("input",{type:"text",className:"form-control",value:this.state.listPengeluaran,readOnly:!0}))),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"Tanggal"),n.a.createElement("input",{type:"date",className:"form-control",value:this.state.tanggal,onChange:e=>this.setState({tanggal:e.target.value})}))),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"Nomor PB"),n.a.createElement("input",{type:"text",className:"form-control",onChange:e=>this.setState({nomor_pb:e.target.value})}))),n.a.createElement("div",{className:"col-lg-12 text-right"},n.a.createElement("button",{className:"btn btn-primary",onClick:()=>this.getPermintaan()},this.props.onSend?n.a.createElement(n.a.Fragment,null,n.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyiapkan"):n.a.createElement(n.a.Fragment,null,"Cari Data ",n.a.createElement("i",{className:"fa fa-search ml-3 "})))))),n.a.createElement("div",{className:"col-lg-12 mt-2"},n.a.createElement(k.a,{keyField:"kode_barcode",data:this.props.pengeluaran||[],columns:this.state.columns,selectRow:e,noDataIndication:n.a.createElement(E.a,{text:"Silahkan Isi Nomor PB dan Klik Tombol Biru Dibawahnya"})})),n.a.createElement("br",null),n.a.createElement(d.a,{nextName:"Next",first:!0,nextStep:()=>this.nextStep(0)})),n.a.createElement("div",{className:this.state.step2},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(k.a,{keyField:"kode_barcode",data:this.props.pengeluaran_selected||[],columns:this.state.columns2,noDataIndication:n.a.createElement(E.a,{text:"Silahkan Isi Nomor PB dan Klik Tombol Biru Dibawahnya"})})),n.a.createElement("br",null),n.a.createElement(d.a,{nextName:"Simpan",prevStep:()=>this.prevStep(1),nextStep:()=>this.handleValidasi(),simpan:!0})))))}})},557:function(e,a,t){"use strict";var l=t(0),n=t.n(l);a.a=class extends l.Component{render(){return n.a.createElement("div",{className:"col-lg-12 mt-3 mb-3"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"text-left"},n.a.createElement("button",{type:"button",className:this.props.first?"btn btn-warning d-none":"btn btn-warning",onClick:this.props.prevStep},n.a.createElement("i",{className:"fa fa-chevron-left mr-3"}),"Back"))),n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{type:this.props.simpan?"submit":"button",className:this.props.last?"btn btn-warning d-none":"btn btn-warning",onClick:this.props.nextStep},this.props.simpan?n.a.createElement(n.a.Fragment,null,"Simpan ",n.a.createElement("i",{className:"fa fa-paper-plane ml-3"})):n.a.createElement(n.a.Fragment,null,"Next ",n.a.createElement("i",{className:"fa fa-chevron-right ml-3"})))))))}}}}]);
//# sourceMappingURL=45.5c3ddef2.chunk.js.map