{"version":3,"sources":["pages/Stoking/HancurBarang/ModalHancurBarang.jsx"],"names":["__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_redux__WEBPACK_IMPORTED_MODULE_1__","redux_form__WEBPACK_IMPORTED_MODULE_2__","redux_form__WEBPACK_IMPORTED_MODULE_3__","_actions_datamaster_action__WEBPACK_IMPORTED_MODULE_4__","_axios__WEBPACK_IMPORTED_MODULE_5__","_components_notification_notification__WEBPACK_IMPORTED_MODULE_6__","ModalHancurBarang","Component","constructor","props","super","this","state","listSupplier","getBarcode","e","dispatch","onProgress","lokasi_hancur","localStorage","getItem","AxiosMasterGet","concat","target","value","then","res","setBarang","data","onFinish","console","log","change","kode_barang","nama_barang","merk_barang","kwalitas","satuan","setState","data_supplier","map","list","kode_supplier","stock","name","nama_supplier","setStock","hasil","split","render","a","createElement","onSubmit","handleSubmit","onKeyPress","key","preventDefault","className","component","ReanderField","type","label","placeholder","onChange","onBlur","readOnly","loading","onSend","ReanderSelect","options","reduxForm","form","enableReinitialize","validate","values","errors","parseInt","qty","connect","datamaster"],"mappings":"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","file":"static/js/110.590a9cc2.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { onFinish, onProgress } from \"../../../actions/datamaster_action\";\r\nimport { AxiosMasterGet } from \"../../../axios\";\r\nimport {\r\n  ReanderField,\r\n  ReanderSelect,\r\n} from \"../../../components/notification/notification\";\r\n\r\nconst validate = (values) => {\r\n  const errors = {};\r\n  if (parseInt(values.qty) > parseInt(values.stock)) {\r\n    errors.qty = \"Tidak Boleh Melebihi Stock\";\r\n  }\r\n  return errors;\r\n};\r\nclass ModalHancurBarang extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      listSupplier: [],\r\n    };\r\n  }\r\n  getBarcode(e) {\r\n    this.props.dispatch(onProgress());\r\n    let lokasi_hancur = localStorage.getItem(\"lokasi_hancur\") || \"\";\r\n    AxiosMasterGet(\r\n      \"hancur-barang/get/BarangByBarcodeLokasi/\" +\r\n        `${e.target.value}&${lokasi_hancur}`\r\n    )\r\n      .then((res) => this.setBarang(res.data))\r\n      .then(() => this.props.dispatch(onFinish()));\r\n  }\r\n  setBarang(res) {\r\n    console.log(res);\r\n    this.props.change(\"kode_barang\", res[0].kode_barang);\r\n    this.props.change(\"nama_barang\", res[0].nama_barang);\r\n    this.props.change(\"merk\", res[0].merk_barang);\r\n    this.props.change(\"kwalitas\", res[0].kwalitas);\r\n    this.props.change(\"satuan\", res[0].satuan);\r\n    this.setState({\r\n      listSupplier:\r\n        res &&\r\n        res[0].data_supplier.map((list) => {\r\n          let data = {\r\n            value: `${list.kode_supplier}||${list.stock}`,\r\n            name: list.nama_supplier,\r\n          };\r\n          return data;\r\n        }),\r\n    });\r\n  }\r\n  setStock(hasil) {\r\n    let data = hasil.split(\"||\");\r\n    this.props.change(\"stock\", data[1]);\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <form\r\n          onSubmit={this.props.handleSubmit}\r\n          onKeyPress={(e) => {\r\n            e.key === \"Enter\" && e.preventDefault();\r\n          }}\r\n        >\r\n          <div className=\"col-lg-12\">\r\n            <div className=\"row\">\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"kode_barcode\"\r\n                  component={ReanderField}\r\n                  type=\"text\"\r\n                  label=\"Kode Barcode\"\r\n                  placeholder=\"Masukan Kode Barcode\"\r\n                  onChange={(e) => this.getBarcode(e)}\r\n                  onBlur={(e) => this.getBarcode(e)}\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3 d-none\">\r\n                <Field\r\n                  name=\"kode_barang\"\r\n                  component={ReanderField}\r\n                  type=\"text\"\r\n                  label=\"Nama Barang\"\r\n                  placeholder=\"Masukan Nama Barang\"\r\n                  readOnly\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"nama_barang\"\r\n                  component={ReanderField}\r\n                  type=\"text\"\r\n                  label=\"Nama Barang\"\r\n                  placeholder=\"Masukan Nama Barang\"\r\n                  readOnly\r\n                  loading={this.props.onSend}\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"merk\"\r\n                  component={ReanderField}\r\n                  type=\"text\"\r\n                  label=\"Merk\"\r\n                  placeholder=\"Masukan Merk\"\r\n                  readOnly\r\n                  loading={this.props.onSend}\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"kwalitas\"\r\n                  component={ReanderField}\r\n                  label=\"Kualitas\"\r\n                  placeholder=\"Masukan Kualitas\"\r\n                  readOnly\r\n                  loading={this.props.onSend}\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"satuan\"\r\n                  component={ReanderField}\r\n                  type=\"text\"\r\n                  label=\"Satuan\"\r\n                  placeholder=\"Masukan Satuan\"\r\n                  readOnly\r\n                  loading={this.props.onSend}\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"kode_supplier\"\r\n                  component={ReanderSelect}\r\n                  options={this.state.listSupplier}\r\n                  type=\"text\"\r\n                  label=\"Kode Supplier\"\r\n                  placeholder=\"Masukan Kode Supplier\"\r\n                  onChange={(e) => this.setStock(e)}\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-2\">\r\n                <Field\r\n                  name=\"stock\"\r\n                  component={ReanderField}\r\n                  type=\"text\"\r\n                  label=\"Stock\"\r\n                  placeholder=\"Masukan Stock\"\r\n                  readOnly\r\n                  loading={this.props.onSend}\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-2\">\r\n                <Field\r\n                  name=\"qty\"\r\n                  component={ReanderField}\r\n                  type=\"text\"\r\n                  label=\"Qty\"\r\n                  placeholder=\"Masukan Qty\"\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-2\">\r\n                <Field\r\n                  name=\"kondisi\"\r\n                  component={ReanderField}\r\n                  type=\"text\"\r\n                  label=\"Kondisi\"\r\n                  placeholder=\"Masukan Kondisi\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-lg-12\">\r\n            <div className=\"text-right\">\r\n              <button className=\"btn btn-primary\">\r\n                Simpan <i className=\"fa fa-paper-plane\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nModalHancurBarang = reduxForm({\r\n  form: \"ModalHancurBarang\",\r\n  enableReinitialize: true,\r\n  validate: validate,\r\n})(ModalHancurBarang);\r\nexport default connect((state) => {\r\n  return {\r\n    onSend: state.datamaster.onSend,\r\n  };\r\n})(ModalHancurBarang);\r\n"],"sourceRoot":""}