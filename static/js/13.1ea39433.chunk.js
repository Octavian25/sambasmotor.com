(window.webpackJsonp=window.webpackJsonp||[]).push([[13,115],{1034:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(7),s=t(28),o=t(18),i=t(41),c=t(30),p=t(555),m=t.n(p),d=t(557),u=t(134),h=t(9),g=t(33),b=t(94),k=t.n(b),E=t(122),_=t(131),N=t(599),S=t(5),v=t(49),y=t(502);a.default=Object(s.b)(e=>({permintaan_temp:e.stocking.permintaan_temp,pengeluaran_selected:e.stocking.pengeluaran_selected,pengeluaran:e.stocking.pengeluaran,onSend:e.datamaster.onSend}),null)(class extends l.a.Component{constructor(e){super(e),this.state={isEdit:!1,modalDialog:!1,isLoading:!1,listPengeluaran:"",listPenerimaan:[],step:0,step1:"row",step2:"row d-none",columns:[{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_supplier",text:"Kode Supplier"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"merk_barang",text:"Merk barang"},{dataField:"kwalitas",text:"Kualitas"},{dataField:"ukuran",text:"Ukuran"},{dataField:"qty",text:"Qty"}],columns2:[{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_supplier",text:"Kode Supplier",sort:!0},{dataField:"qty",text:"Qty"}]}}componentDidMount(){localStorage.setItem("FakturTerpilih","[]"),localStorage.setItem("FakturTerpilih_detail","[]"),Object(h.b)("pengeluaran-barang/generate/no-trx").then(e=>this.setState({listPengeluaran:e.data[0].no_pengeluaran,tanggal:Object(g.c)()})),this.props.dispatch(Object(c.n)())}nextStep(){switch(this.state.step){case 0:this.setState({step:this.state.step+1,step1:"row d-none",step2:"row"}),this.props.dispatch(Object(c.n)())}}prevStep(){switch(this.state.step){case 1:this.setState({step:this.state.step-1,step1:"row ",step2:"row d-none"})}}handleValidasi(e){if(null===localStorage.getItem("FakturTerpilih"))return Object(o.a)("Faktur Terpilih Kosong"),!1;let a=JSON.parse(localStorage.getItem("FakturTerpilih_detail"))||[],t={no_pengeluaran:this.state.listPengeluaran,tanggal:this.state.tanggal,no_bon:this.state.nomor_pb,detail_barang:JSON.parse(localStorage.getItem("FakturTerpilih"))},n=[];a.forEach((e,a)=>{let t=[++a,e.kode_barcode,e.nama_barang,e.merk_barang,e.kwalitas,e.ukuran,e.qty];n.push(t)});let l=["NO","BARCODE","NAMA BARANG","MERK","KW","UKURAN","QTY"];Object(h.c)("pengeluaran-barang/post-transaksi",t).then(()=>Object(o.b)("Berhasil Menyimpan data")).then(()=>Object(u.a)("Tanggal",this.state.tanggal,"","","NO PENGELUARAN",this.state.listPengeluaran,"","","ADMIN","01-28-2021","ADMIN",l,"BUKTI PENGELUARAN BARANG",n,[],!0)).then(()=>Object(g.d)(["FakturTerpilih","FakturTerpilih_detail"])).then(()=>this.props.dispatch(Object(c.m)())).then(()=>this.prevStep()).then(()=>this.setState({step:0}))}getPermintaan(e){this.props.dispatch(Object(c.m)(this.state.nomor_pb))}handleModal(e){let a=JSON.parse(localStorage.getItem("pengeluaran_barang"))||[],t=a.findIndex(a=>a.kode_barcode===e.kode_barcode);if(-1!==t){let n={kode_barcode:e.kode_barcode,kode_supplier:e.kode_supplier,nama_barang:e.nama_barang,merk_barang:e.merk,kwalitas:e.kwalitas,ukuran:e.ukuran,stock:e.stock,qty:parseInt(e.qty)+parseInt(a[t].qty)};a.splice(t,1),a.push(n),localStorage.setItem("pengeluaran_barang",JSON.stringify(a)),Object(o.b)("Berhasil"),this.props.dispatch(Object(v.a)("ModalReturnSupplier")),this.props.dispatch(Object(c.l)())}else{let a={kode_barcode:e.kode_barcode,kode_supplier:e.kode_supplier,nama_barang:e.nama_barang,merk_barang:e.merk,kwalitas:e.kwalitas,ukuran:e.ukuran,stock:e.stock,qty:e.qty};Object(y.a)("pengeluaran_barang",a).then(()=>this.props.dispatch(Object(v.a)("ModalPermintaanBarang"))).then(()=>this.props.dispatch(Object(c.l)()))}}render(){const e={mode:"checkbox",clickToSelect:!0,onSelect:(e,a,t,n)=>{console.log(e.noFaktur);let l=JSON.parse(localStorage.getItem("FakturTerpilih"))||[],r=JSON.parse(localStorage.getItem("FakturTerpilih_detail"))||[];const s={kode_supplier:e.kode_supplier,kode_barcode:e.kode_barcode,qty:e.qty},o={kode_barcode:e.kode_barcode,kode_supplier:e.kode_supplier,nama_barang:e.nama_barang,merk_barang:e.merk_barang,kwalitas:e.kwalitas,ukuran:e.ukuran,qty:e.qty};if(a){var i=l.findIndex((a,t)=>a.kode_barcode===e.kode_barcode),c=r.findIndex((a,t)=>a.kode_barcode===e.kode_barcode);i<0?(l.push(s),r.push(o)):(l.splice(i,1),r.splice(c,1)),localStorage.setItem("FakturTerpilih",JSON.stringify(l)),localStorage.setItem("FakturTerpilih_detail",JSON.stringify(r))}else{var p=l.findIndex((a,t)=>a.kode_barcode===e.kode_barcode),m=r.findIndex((a,t)=>a.kode_barcode===e.kode_barcode);l.splice(p,1),r.splice(m,1),localStorage.setItem("FakturTerpilih",JSON.stringify(l)),localStorage.setItem("FakturTerpilih_detail",JSON.stringify(r))}},onSelectAll:(e,a,t)=>{var n=[],l=[];a.forEach(function(e){const a={kode_supplier:e.kode_supplier,kode_barcode:e.kode_barcode,qty:e.qty},t={kode_barcode:e.kode_barcode,kode_supplier:e.kode_supplier,nama_barang:e.nama_barang,merk_barang:e.merk_barang,kwalitas:e.kwalitas,ukuran:e.ukuran,qty:e.qty};n.push(a),l.push(t)}),e?(localStorage.setItem("FakturTerpilih",JSON.stringify(n)),localStorage.setItem("FakturTerpilih_detail",JSON.stringify(l))):(localStorage.removeItem("FakturTerpilih"),localStorage.removeItem("FakturTerpilih_detail"))}};return l.a.createElement("div",null,l.a.createElement("ol",{className:"breadcrumb float-xl-right"},l.a.createElement("li",{className:"breadcrumb-item"},l.a.createElement(r.b,{to:"#"},"Stocking")),l.a.createElement("li",{className:"breadcrumb-item active"},"Pengeluaran Barang")),l.a.createElement("h1",{className:"page-header"},"Pengeluaran Barang "),l.a.createElement(i.a,null,l.a.createElement(i.c,null,"Pengeluaran Barang"),l.a.createElement("br",null),l.a.createElement(i.b,null,l.a.createElement("div",{className:"mb-3"},l.a.createElement(m.a,{steps:[{title:"Pilih Faktur"},{title:"Data Terpilih"}],activeStep:this.state.step})),l.a.createElement("div",{className:this.state.step1},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:""},"No Pengeluaran"),l.a.createElement("input",{type:"text",className:"form-control",value:this.state.listPengeluaran,readOnly:!0}))),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:""},"Tanggal"),l.a.createElement("input",{type:"date",className:"form-control",value:this.state.tanggal,onChange:e=>this.setState({tanggal:e.target.value})}))),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:""},"Nomor PB"),l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>this.setState({nomor_pb:e.target.value})}))),l.a.createElement("div",{className:"col-lg-12 text-right"},l.a.createElement("button",{className:"btn btn-primary",onClick:()=>this.getPermintaan()},this.props.onSend?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyiapkan"):l.a.createElement(l.a.Fragment,null,"Cari Data ",l.a.createElement("i",{className:"fa fa-search ml-3 "})))))),l.a.createElement("div",{className:"col-lg-12 mt-2"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"text-left"},l.a.createElement("button",{className:"btn btn-primary mb-3",onClick:()=>this.props.dispatch(Object(S.Wb)())},"+ Tambah Data"))),l.a.createElement(k.a,{keyField:"kode_barcode",data:this.props.pengeluaran||[],columns:this.state.columns,selectRow:e,noDataIndication:l.a.createElement(E.a,{text:"Silahkan Isi Nomor PB dan Klik Tombol Biru Dibawahnya"})})),l.a.createElement("br",null),l.a.createElement(d.a,{nextName:"Next",first:!0,nextStep:()=>this.nextStep(0)})),l.a.createElement("div",{className:this.state.step2},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(k.a,{keyField:"kode_barcode",data:this.props.pengeluaran_selected||[],columns:this.state.columns2,noDataIndication:l.a.createElement(E.a,{text:"Silahkan Isi Nomor PB dan Klik Tombol Biru Dibawahnya"})})),l.a.createElement("br",null),l.a.createElement(d.a,{nextName:"Simpan",prevStep:()=>this.prevStep(1),nextStep:()=>this.handleValidasi(),simpan:!0})))),l.a.createElement(_.a,{title:"Tambah Barang Pengeluaran",content:l.a.createElement(N.default,{onSubmit:e=>this.handleModal(e)})}))}})},502:function(e,a,t){"use strict";t.d(a,"a",function(){return r});var n=t(16),l=t.n(n);const r=(e,a)=>new Promise((t,n)=>{let r=JSON.parse(localStorage.getItem(e))||[];r.push(a),localStorage.setItem(e,JSON.stringify(r)),l.a.fire({position:"top-right",text:"Tambah Data Berhasil",timer:2e3,icon:"success",showConfirmButton:!1}).then(()=>t("Berhaisl")).catch(()=>n("GAGAL"))})},557:function(e,a,t){"use strict";var n=t(0),l=t.n(n);a.a=class extends n.Component{render(){return l.a.createElement("div",{className:"col-lg-12 mt-3 mb-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("div",{className:"text-left"},l.a.createElement("button",{type:"button",className:this.props.first?"btn btn-warning d-none":"btn btn-warning",onClick:this.props.prevStep},l.a.createElement("i",{className:"fa fa-chevron-left mr-3"}),"Back"))),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{type:this.props.simpan?"submit":"button",className:this.props.last?"btn btn-warning d-none":"btn btn-warning",onClick:this.props.nextStep},this.props.simpan?l.a.createElement(l.a.Fragment,null,"Simpan ",l.a.createElement("i",{className:"fa fa-paper-plane ml-3"})):l.a.createElement(l.a.Fragment,null,"Next ",l.a.createElement("i",{className:"fa fa-chevron-right ml-3"})))))))}}},599:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(28),s=t(197),o=t(198),i=t(5),c=t(9),p=t(18);class m extends n.Component{constructor(e){super(e),this.state={hasilBarcode:[],listSupplier:[],stock:0}}getBarcode(e){this.props.dispatch(Object(i.Vb)()),Object(c.b)("permintaan-barang/get/BarangByBarcode/"+e.target.value).then(e=>this.setState({hasilBarcode:e.data})).then(()=>this.setDetail()).then(()=>this.props.dispatch(Object(i.Ub)())).catch(e=>{console.log(e),this.props.dispatch(Object(i.Ub)())})}setDetail(){this.props.change("nama_barang",this.state.hasilBarcode[0].nama_barang),this.props.change("merk",this.state.hasilBarcode[0].merk_barang),this.props.change("kwalitas",this.state.hasilBarcode[0].kwalitas),this.props.change("ukuran",this.state.hasilBarcode[0].ukuran);let e=this.state.hasilBarcode[0].data_supplier.map(e=>{return{value:e.kode_supplier+"||"+e.stock,name:"".concat(e.nama_supplier," ( ").concat(e.kode_supplier,")")}});this.setState({listSupplier:e})}setStock(e){let a=(e||"0||0").split("||");this.setState({stock:a[1]}),this.props.change("kode_supplier",a[0]),this.props.change("stock",a[1])}render(){return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:e=>{"Enter"===e.key&&e.preventDefault()}},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(s.a,{name:"kode_barcode",component:p.c,type:"text",label:"Kode Barcode",placeholder:"Masukan Kode Barcode",onChange:e=>this.getBarcode(e),onBlur:e=>this.getBarcode(e)})),l.a.createElement("div",{className:"col-lg-6"}),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(s.a,{name:"nama_barang",component:p.c,type:"text",label:"Nama Barang",placeholder:"Masukan Nama Barang",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"merk",component:p.c,type:"text",label:"Merk",placeholder:"Masukan Merk",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"kwalitas",component:p.c,type:"text",label:"Kualitas",placeholder:"Masukan Kualitas",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"ukuran",component:p.c,type:"text",label:"Ukuran",placeholder:"Masukan Ukuran",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"kode_supplier1",component:p.e,options:this.state.listSupplier||[],onChange:e=>this.setStock(e),type:"text",label:"Kode Supplier",placeholder:"Masukan Kode Supplier"})),l.a.createElement("div",{className:"col-lg-3 d-none"},l.a.createElement(s.a,{name:"kode_supplier",component:p.c,type:"text",label:"Kode Supplier",placeholder:"Masukan Kode Supplier"})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"stock",component:p.c,type:"text",label:"Stock",placeholder:"Masukan Stock",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"qty",component:p.c,type:"text",label:"Qty",placeholder:"Masukan Qty"})))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{className:"btn btn-primary"},"Simpan ",l.a.createElement("i",{className:"fa fa-paper-plane"})))))}}m=Object(o.a)({form:"ModalPermintaanBarang",enableReinitialize:!0,validate:e=>{const a={};return parseInt(e.stock)<parseInt(e.qty)&&(a.qty="Jumlah Melebihi stock, mohon kuragi"),a}})(m),a.default=Object(r.b)(e=>({onSend:e.datamaster.onSend}))(m)}}]);
//# sourceMappingURL=13.1ea39433.chunk.js.map