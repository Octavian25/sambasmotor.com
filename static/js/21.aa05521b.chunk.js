(window.webpackJsonp=window.webpackJsonp||[]).push([[21,111],{1083:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(7),s=t(28),c=t(16),i=t.n(c),o=t(42),m=t.n(o),d=t(131),p=t(18),u=t(41),g=t(5),h=t(30),k=(t(195),t(197)),b=t(198),E=t(9),_=t(132);const N=(e,a)=>{i.a.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(t=>{if(t.isConfirmed){let t=JSON.parse(localStorage.getItem("KunciBarang_temp")),n=JSON.parse(localStorage.getItem("KunciBarang_temp_kirim"));t.splice(e,1),n.splice(e,1),localStorage.setItem("KunciBarang_temp",JSON.stringify(t)),localStorage.setItem("KunciBarang_temp_kirim",JSON.stringify(n)),Object(p.b)("Berhasil Menghapus Data"),a(Object(h.i)())}})};class S extends n.Component{constructor(e){super(e),this.state={listGudang:[],columns:[{dataField:"kode_barcode",text:"Kode Barcode",sort:!0},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"merk_barang",text:"Merk"},{dataField:"kwalitas",text:"Kualitas"},{dataField:"qty",text:"Qty"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(e,a)=>{let t={kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,merk:a.merk,kwalitas:a.kwalitas,satuan:a.satuan,qty:a.qty,harga_satuan:a.harga_satuan,total:a.total};return this.setState({}),l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{onClick:()=>this.editModal(t),className:"btn btn-warning mr-3"},"Edit",l.a.createElement("i",{className:"fa fa-edit ml-2"})),l.a.createElement("button",{onClick:()=>N(a.kodeProvinsi,this.props.dispatch),className:"btn btn-danger"},"Hapus",l.a.createElement("i",{className:"fa fa-trash ml-2"}))))}}]}}componentDidMount(){Object(E.b)("hancur-barang/generate/no-trx").then(e=>this.props.change("no_pindah",e.data[0].no_hancur)),this.props.dispatch(Object(g.Vb)()),Object(E.b)("lokasi-gudang/get/all").then(e=>this.setState({listGudang:e&&e.data.map(e=>{return{value:e.kode_lokasi_gudang,name:e.nama_lokasi_gudang}})})).then(()=>this.props.dispatch(Object(g.Ub)()))}render(){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:!0},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(k.a,{name:"no_pindah",component:p.c,type:"text",label:"Nomor Pindah",placeholder:"Masukan Nomor Pindah",readOnly:!0})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(k.a,{name:"tanggal",component:p.c,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal"})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(k.a,{name:"lokasi",component:p.e,options:this.state.listGudang,label:"Lokasi Gudang",placeholder:"Pilih Lokasi Gudang",onChange:e=>localStorage.setItem("lokasi_hancur",e),loading:this.props.onSend}))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("div",{className:"text-left"})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:()=>this.props.dispatch(Object(g.Wb)())},"Tambah Barang ",l.a.createElement("i",{className:"fa fa-plus ml-3"}))))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(_.a,{columns:this.state.columns,data:this.props.kunci_temp||[],keyField:"kode_barcode"})),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{className:"btn btn-primary"},this.props.onSend?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):l.a.createElement(l.a.Fragment,null,"Simpan ",l.a.createElement("i",{className:"fa fa-paper-plane ml-3 "})))))))}}S=Object(b.a)({form:"permintaanBarang",enableReinitialize:!0})(S);var y=Object(s.b)(e=>({onSend:e.datamaster.onSend,kunci_temp:e.stocking.kunci_temp}))(S),f=(t(600),t(49)),B=t(501);const v=Object(n.lazy)(()=>t.e(114).then(t.bind(null,1043))),x=(e,a)=>{i.a.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(e=>{e.isConfirmed&&Object(p.b)("Data Berhasil Di Hapus")})};a.default=Object(s.b)(e=>({kunci_temp:e.stocking.kunci_temp}),null)(class extends l.a.Component{constructor(e){super(e),this.state={isEdit:!1,modalDialog:!1,isLoading:!1,columns:[{dataField:"id_mekanik",text:"ID Mekanik",sort:!0},{dataField:"nama_mekanik",text:"Nama Mekanik"},{dataField:"kode_kunci",text:"Kode kunci"},{dataField:"nama_kunci",text:"Nama Kunci"},{dataField:"qty",text:"Qty"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(e,a)=>{let t={id_mekanik:a.id_mekanik,nama_mekanik:a.nama_mekanik,kode_kunci:a.kode_kunci,nama_kunci:a.nama_kunci,qty:a.qty};return this.setState({}),l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{onClick:()=>this.editModal(t),className:"btn btn-warning mr-3"},"Edit",l.a.createElement("i",{className:"fa fa-edit ml-2"})),l.a.createElement("button",{onClick:()=>x(a.kodeProvinsi,this.props.dispatch),className:"btn btn-danger"},"Hapus",l.a.createElement("i",{className:"fa fa-trash ml-2"}))))}}]}}componentDidMount(){this.props.dispatch(Object(h.k)())}handleSubmit(e){let a=JSON.parse(localStorage.getItem("KunciBarang_temp_kirim"))||[],t=JSON.parse(localStorage.getItem("KunciBarang_temp"))||[],n=a.findIndex(a=>a.kode_barcode===e.kode_barcode),l=t.findIndex(a=>a.kode_barcode===e.kode_barcode);if(-1!==n){let r={kode_barcode:e.kode_barcode,qty:parseInt(e.qty)+parseFloat(a[n].qty),kode_supplier:e.kode_supplier},s={kode_barcode:e.kode_barcode,nama_barang:e.nama_barang,merk_barang:e.merk,kwalitas:e.kwalitas,ukuran:e.ukuran,stock:e.stock,qty:parseInt(e.qty)+parseInt(t[l].qty)};a.splice(n,1),t.splice(l,1),a.push(r),t.push(s),localStorage.setItem("KunciBarang_temp",JSON.stringify(t)),localStorage.setItem("KunciBarang_temp_kirim",JSON.stringify(a)),Object(p.b)("Berhasil"),this.props.dispatch(Object(f.a)("ModalReturnSupplier")),this.props.dispatch(Object(h.k)())}else{let a={kode_barcode:e.kode_barcode,qty:parseInt(e.qty),kode_supplier:e.kode_supplier},t={kode_barcode:e.kode_barcode,nama_barang:e.nama_barang,merk_barang:e.merk,kwalitas:e.kwalitas,ukuran:e.ukuran,stock:e.stock,qty:e.qty};Object(B.a)("KunciBarang_temp",t).then(()=>this.props.dispatch(Object(f.a)("ModalPermintaanBarang"))).then(()=>this.props.dispatch(Object(h.k)())),Object(B.a)("KunciBarang_temp_kirim",a).then(()=>this.props.dispatch(Object(f.a)("ModalPermintaanBarang"))).then(()=>this.props.dispatch(Object(h.k)()))}}render(){return l.a.createElement("div",null,l.a.createElement("ol",{className:"breadcrumb float-xl-right"},l.a.createElement("li",{className:"breadcrumb-item"},l.a.createElement(r.b,{to:"#"},"Data Master")),l.a.createElement("li",{className:"breadcrumb-item active"},"Kunci Barang")),l.a.createElement("h1",{className:"page-header"},"Kunci Barang "),l.a.createElement(u.a,null,l.a.createElement(u.c,null,"Kunci Barang"),l.a.createElement(u.b,null,l.a.createElement(y,{onSubmit:e=>this.handleKirim(e)}),l.a.createElement(d.a,{title:this.state.isEdit?"Edit Data Kunci":"Tambah Data Kunci",content:l.a.createElement(n.Suspense,{fallback:l.a.createElement(m.a,{width:"100%",height:50,count:2})},l.a.createElement(v,{onSubmit:e=>this.handleSubmit(e),onSend:this.props.onSend,isEdit:this.state.isEdit}))}))))}})},501:function(e,a,t){"use strict";t.d(a,"a",function(){return r});var n=t(16),l=t.n(n);const r=(e,a)=>new Promise((t,n)=>{let r=JSON.parse(localStorage.getItem(e))||[];r.push(a),localStorage.setItem(e,JSON.stringify(r)),l.a.fire({position:"top-right",text:"Tambah Data Berhasil",timer:2e3,icon:"success",showConfirmButton:!1}).then(()=>t("Berhaisl")).catch(()=>n("GAGAL"))})},600:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(28),s=t(197),c=t(198),i=t(5),o=t(9),m=t(18);class d extends n.Component{constructor(e){super(e),this.state={listSupplier:[]}}getBarcode(e){this.props.dispatch(Object(i.Vb)());let a=localStorage.getItem("lokasi_hancur")||"";Object(o.b)("hancur-barang/get/BarangByBarcodeLokasi/"+"".concat(e.target.value,"&").concat(a)).then(e=>this.setBarang(e.data)).then(()=>this.props.dispatch(Object(i.Ub)()))}setBarang(e){console.log(e),this.props.change("kode_barang",e[0].kode_barang),this.props.change("nama_barang",e[0].nama_barang),this.props.change("merk",e[0].merk_barang),this.props.change("kwalitas",e[0].kwalitas),this.props.change("satuan",e[0].satuan),this.setState({listSupplier:e&&e[0].data_supplier.map(e=>{return{value:"".concat(e.kode_supplier,"||").concat(e.stock),name:e.nama_supplier}})})}setStock(e){let a=e.split("||");this.props.change("stock",a[1])}render(){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:e=>{"Enter"===e.key&&e.preventDefault()}},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"kode_barcode",component:m.c,type:"text",label:"Kode Barcode",placeholder:"Masukan Kode Barcode",onChange:e=>this.getBarcode(e),onBlur:e=>this.getBarcode(e)})),l.a.createElement("div",{className:"col-lg-3 d-none"},l.a.createElement(s.a,{name:"kode_barang",component:m.c,type:"text",label:"Nama Barang",placeholder:"Masukan Nama Barang",readOnly:!0})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"nama_barang",component:m.c,type:"text",label:"Nama Barang",placeholder:"Masukan Nama Barang",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"merk",component:m.c,type:"text",label:"Merk",placeholder:"Masukan Merk",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"kwalitas",component:m.c,label:"Kualitas",placeholder:"Masukan Kualitas",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"satuan",component:m.c,type:"text",label:"Satuan",placeholder:"Masukan Satuan",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(s.a,{name:"kode_supplier",component:m.e,options:this.state.listSupplier,type:"text",label:"Kode Supplier",placeholder:"Masukan Kode Supplier",onChange:e=>this.setStock(e)})),l.a.createElement("div",{className:"col-lg-2"},l.a.createElement(s.a,{name:"stock",component:m.c,type:"text",label:"Stock",placeholder:"Masukan Stock",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-2"},l.a.createElement(s.a,{name:"qty",component:m.c,type:"text",label:"Qty",placeholder:"Masukan Qty"})),l.a.createElement("div",{className:"col-lg-2"},l.a.createElement(s.a,{name:"kondisi",component:m.c,type:"text",label:"Kondisi",placeholder:"Masukan Kondisi"})))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{className:"btn btn-primary"},"Simpan ",l.a.createElement("i",{className:"fa fa-paper-plane"}))))))}}d=Object(c.a)({form:"ModalHancurBarang",enableReinitialize:!0,validate:e=>{const a={};return parseInt(e.qty)>parseInt(e.stock)&&(a.qty="Tidak Boleh Melebihi Stock"),a}})(d),a.default=Object(r.b)(e=>({onSend:e.datamaster.onSend}))(d)}}]);
//# sourceMappingURL=21.aa05521b.chunk.js.map