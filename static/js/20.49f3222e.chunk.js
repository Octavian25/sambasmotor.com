(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1076:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),o=t(28),s=t(7),c=t(49),r=t(5),p=t(97),i=t(9),m=t(18),d=t(41),h=t(501),g=t(131),u=t(197),b=t(198),k=t(132),E=t(487);class S extends n.Component{constructor(e){super(e),this.state={columns:[{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_supplier",text:"Kode Supplier"},{dataField:"qty",text:"Qty"}]}}componentDidMount(){this.props.dispatch(Object(r.Bb)()),this.props.dispatch(Object(p.c)()),this.props.change("lokasi",localStorage.getItem("lokasi_stock_opname")||"")}render(){return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:e=>{"Enter"===e.key&&e.preventDefault()}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(u.a,{name:"tanggal",component:m.c,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal",validate:E.a})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(u.a,{name:"lokasi",component:m.e,options:this.props.listgudang.map(e=>{return{value:e.kode_lokasi_gudang,name:e.nama_lokasi_gudang}}),type:"text",label:"Lokasi",placeholder:"Masukan Lokasi",onChange:e=>localStorage.setItem("lokasi_stock_opname",e),validate:E.a})),l.a.createElement("div",{className:"col-lg-12 mb-3"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:()=>this.props.dispatch(Object(r.Wb)()),disabled:!localStorage.getItem("lokasi_stock_opname")},"Tambah Data ",l.a.createElement("i",{className:"fa fa-plus ml-3"})))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(k.a,{keyField:"kode_barcode",data:this.props.liststockopname||[],columns:this.state.columns,textEmpty:"Silahkan pilih Lokasi, Setelah itu tambah barang"})),l.a.createElement("div",{className:"col-lg-12 mb-3"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{className:"btn btn-primary",disabled:this.props.onSend},this.props.onSend?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):l.a.createElement(l.a.Fragment,null,"Simpan ",l.a.createElement("i",{className:"fa fa-paper-plane ml-3 "})))))))}}S=Object(b.a)({form:"HeadStockOpname",enableReinitialize:!0})(S);var O=Object(o.b)(e=>({listgudang:e.datamaster.listgudang,liststockopname:e.supervisor.liststockopname,onSend:e.datamaster.onSend}))(S);class v extends n.Component{constructor(e){super(e),this.state={listSupplier:[]}}getBarcode(e){this.props.dispatch(Object(r.Vb)());let a=localStorage.getItem("lokasi_hancur")||"";Object(i.b)("hancur-barang/get/BarangByBarcodeLokasi/"+"".concat(e.target.value,"&").concat(a)).then(e=>this.setBarang(e.data)).then(()=>this.props.dispatch(Object(r.Ub)())).catch(e=>this.props.dispatch(Object(r.Ub)()))}setBarang(e){console.log(e),this.props.change("kode_barang",e[0].kode_barang),this.props.change("nama_barang",e[0].nama_barang),this.props.change("merk",e[0].merk_barang),this.props.change("kwalitas",e[0].kwalitas),this.props.change("satuan",e[0].satuan),this.setState({listSupplier:e&&e[0].data_supplier.map(e=>{return{value:"".concat(e.kode_supplier,"||").concat(e.stock),name:e.nama_supplier}})})}setStock(e){let a=e.split("||");this.props.change("kode_supplier",a[0]),this.props.change("stock",a[1])}render(){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:e=>{"Enter"===e.key&&e.preventDefault()}},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(u.a,{name:"kode_barcode",component:m.c,type:"text",label:"Kode Barcode",placeholder:"Masukan Kode Barcode",onChange:e=>this.getBarcode(e),onBlur:e=>this.getBarcode(e)})),l.a.createElement("div",{className:"col-lg-3 d-none"},l.a.createElement(u.a,{name:"kode_barang",component:m.c,type:"text",label:"Nama Barang",placeholder:"Masukan Nama Barang",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(u.a,{name:"nama_barang",component:m.c,type:"text",label:"Nama Barang",placeholder:"Masukan Nama Barang",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(u.a,{name:"merk",component:m.c,type:"text",label:"Merk",placeholder:"Masukan Merk",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(u.a,{name:"kwalitas",component:m.c,label:"Kualitas",placeholder:"Masukan Kualitas",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(u.a,{name:"satuan",component:m.c,type:"text",label:"Satuan",placeholder:"Masukan Satuan",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(u.a,{name:"kode_supplier1",component:m.e,options:this.state.listSupplier,type:"text",label:"Kode Supplier",placeholder:"Masukan Kode Supplier",onChange:e=>this.setStock(e)})),l.a.createElement("div",{className:"col-lg-3 d-none"},l.a.createElement(u.a,{name:"kode_supplier",component:m.c,type:"text",label:"Kode Supplier",placeholder:"Masukan Kode Supplier"})),l.a.createElement("div",{className:"col-lg-2"},l.a.createElement(u.a,{name:"stock",component:m.c,type:"number",label:"Stock",placeholder:"Masukan Stock",readOnly:!0,loading:this.props.onSend})),l.a.createElement("div",{className:"col-lg-2"},l.a.createElement(u.a,{name:"qty",component:m.c,type:"number",label:"Qty",placeholder:"Masukan Qty",validate:E.a})))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{className:"btn btn-primary"},"Simpan ",l.a.createElement("i",{className:"fa fa-paper-plane"}))))))}}v=Object(b.a)({form:"ModalStockOpname",enableReinitialize:!0})(v);var N=Object(o.b)(e=>({onSend:e.datamaster.onSend}))(v);a.default=Object(o.b)()(class extends n.Component{constructor(e){super(e),this.state={}}componentDidMount(){}handleHead(e){this.props.dispatch(Object(r.Vb)());let a={tanggal:e.tanggal,kode_lokasi_gudang:e.lokasi,detail_barang:JSON.parse(localStorage.getItem("StockOpname_temp"))||[]};Object(i.c)("stock-opname/post-transaksi",a).then(()=>Object(m.b)("Stockopname Berhasil")).then(()=>this.props.dispatch(Object(c.a)("HeadStockOpname"))).then(()=>localStorage.removeItem("StockOpname_temp")).then(()=>localStorage.removeItem("lokasi_stock_opname")).then(()=>this.props.dispatch(Object(p.c)())).then(()=>this.props.dispatch(Object(r.Ub)())).catch(e=>Object(m.h)("Gagal StockOpname , Error : ".concat(e.response.data)).then(()=>this.props.dispatch(Object(r.Ub)())))}handleModal(e){let a={kode_supplier:e.kode_supplier,kode_barcode:e.kode_barcode,qty:e.qty};Object(h.a)("StockOpname_temp",a),this.props.dispatch(Object(p.c)()),this.props.dispatch(Object(c.a)("ModalStockOpname"))}render(){return l.a.createElement("div",null,l.a.createElement("ol",{className:"breadcrumb float-xl-right"},l.a.createElement("li",{className:"breadcrumb-item"},l.a.createElement(s.b,{to:"#"},"Stock Opname")),l.a.createElement("li",{className:"breadcrumb-item active"},"Stock Opname Barang")),l.a.createElement("h1",{className:"page-header"},"Stock Opname Barang "),l.a.createElement(d.a,null,l.a.createElement(d.c,null,"Stock Opname Barang"),l.a.createElement(d.b,null,l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(O,{onSubmit:e=>this.handleHead(e),liststockopname:this.props.liststockopname})))),l.a.createElement(g.a,{title:"Tambah Data Barang",content:l.a.createElement(N,{onSubmit:e=>this.handleModal(e)})}))}})},487:function(e,a,t){"use strict";t.d(a,"a",function(){return n});const n=e=>e?void 0:"Tidak Boleh Kosong"},501:function(e,a,t){"use strict";t.d(a,"a",function(){return o});var n=t(16),l=t.n(n);const o=(e,a)=>new Promise((t,n)=>{let o=JSON.parse(localStorage.getItem(e))||[];o.push(a),localStorage.setItem(e,JSON.stringify(o)),l.a.fire({position:"top-right",text:"Tambah Data Berhasil",timer:2e3,icon:"success",showConfirmButton:!1}).then(()=>t("Berhaisl")).catch(()=>n("GAGAL"))})}}]);
//# sourceMappingURL=20.49f3222e.chunk.js.map