{"version":3,"sources":["pages/Stoking/PermintaanBarang/HeadPermintaanBarang.jsx","pages/Stoking/PermintaanBarang/PermintaanBarang.jsx","config/Helper.jsx"],"names":["HeadPermintaanBarang","Component","constructor","props","super","this","state","listDivisi","listSales","listSupplier","columns","dataField","text","sort","csvExport","headerClasses","formatter","rowcontent","row","setState","react_default","a","createElement","className","type","onClick","deleteBarang","Swal","fire","title","icon","position","cancelButtonText","showCancelButton","confirmButtonText","showConfirmButton","then","result","isConfirmed","deleteLocalItemBarcode","kode_barcode","dispatch","getPermintaanTemp","componentDidMount","AxiosMasterGet","res","data","map","list","value","kode_divisi","name","nama_divisi","kode_supplier","concat","nama_supplier","change","no_permintaan","getSales","hasil","kode_pegawai","nama_pegawai","render","onSubmit","handleSubmit","autoComplete","Field","component","ReanderField","label","placeholder","readOnly","ReanderSelect","options","onChange","e","showModal","permintaan_temp","tabel","keyField","CSVExport","textEmpty","lib_default","width","height","reduxForm","form","enableReinitialize","connect","initialValues","localStorage","getItem","ModalPermintaanBarang","lazy","__webpack_require__","bind","stocking","React","isEdit","modalDialog","isLoading","datakategori","no_acc","nama_bank","atas_nama","setItem","handleModal","local","JSON","parse","local2","filtered","findIndex","filtered2","qty","parseInt","parseFloat","dataTable","nama_barang","merk","kwalitas","ukuran","stock","splice","push","stringify","NotifSucces","reset","simpanLocal","sendData","kirim","divisi","pegawai","tanggal","detail_barang","tableRows","forEach","i","rows","columnTabel","AxiosMasterPost","CetakNota","multipleDeleteLocal","catch","err","NotifError","response","react_router_dom","to","panel","PermintaanBarang_HeadPermintaanBarang","ModalGlobal","content","react","fallback","count","onSend","d","__webpack_exports__","sweetalert2__WEBPACK_IMPORTED_MODULE_0__","sweetalert2__WEBPACK_IMPORTED_MODULE_0___default","n","nama","Promise","resolve","reject","array","timer"],"mappings":"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","file":"static/js/49.46890d57.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { showModal } from \"../../../actions/datamaster_action\";\r\nimport {\r\n  deleteLocalItemBarcode,\r\n  ReanderField,\r\n  ReanderSelect,\r\n} from \"../../../components/notification/notification\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport Swal from \"sweetalert2\";\r\nimport { getPermintaanTemp } from \"../../../actions/stocking_action\";\r\nimport { AxiosMasterGet } from \"../../../axios\";\r\nimport Tabel from \"../../../components/Tabel/tabel\";\r\n\r\nconst maptostate = (state) => {\r\n  return {\r\n    initialValues: {\r\n      no_permintaan: localStorage.getItem(\"kode_permintaan_barang\") || \"\",\r\n    },\r\n  };\r\n};\r\nclass HeadPermintaanBarang extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      listDivisi: [],\r\n      listSales: [],\r\n      listSupplier: [],\r\n      columns: [\r\n        {\r\n          dataField: \"kode_barcode\",\r\n          text: \"Kode barcode\",\r\n          sort: true,\r\n        },\r\n        {\r\n          dataField: \"nama_barang\",\r\n          text: \"Nama Barang\",\r\n        },\r\n        {\r\n          dataField: \"merk\",\r\n          text: \"Merk\",\r\n        },\r\n        {\r\n          dataField: \"kwalitas\",\r\n          text: \"Kualitas\",\r\n        },\r\n        {\r\n          dataField: \"ukuran\",\r\n          text: \"Ukuran\",\r\n        },\r\n        {\r\n          dataField: \"stock\",\r\n          text: \"Stock\",\r\n        },\r\n        {\r\n          dataField: \"qty\",\r\n          text: \"Qty\",\r\n        },\r\n\r\n        {\r\n          dataField: \"action\",\r\n          text: \"Action\",\r\n          csvExport: false,\r\n          headerClasses: \"text-center\",\r\n          formatter: (rowcontent, row) => {\r\n            this.setState({});\r\n            return (\r\n              <div className=\"row text-center\">\r\n                <div className=\"col-12\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => this.deleteBarang(row)}\r\n                    className=\"btn btn-danger\"\r\n                  >\r\n                    Hapus\r\n                    <i className=\"fa fa-trash ml-2\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n      ],\r\n    };\r\n  }\r\n  deleteBarang(row) {\r\n    Swal.fire({\r\n      title: \"Anda Yakin !!\",\r\n      text: \"Ingin Menghapus Data Ini ?\",\r\n      icon: \"warning\",\r\n      position: \"top-center\",\r\n      cancelButtonText: \"Tidak\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"OK\",\r\n      showConfirmButton: true,\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        deleteLocalItemBarcode(\"PermintaanBarang_temp\", row.kode_barcode);\r\n        // deleteLocalItemBarcode(\"PermintaanBarang_temp\", row.kode_barcode);\r\n        this.props.dispatch(getPermintaanTemp());\r\n      }\r\n    });\r\n  }\r\n  componentDidMount() {\r\n    AxiosMasterGet(\"divisi/get/all\").then((res) =>\r\n      this.setState({\r\n        listDivisi: res.data.map((list) => {\r\n          let data = {\r\n            value: list.kode_divisi,\r\n            name: list.nama_divisi,\r\n          };\r\n          return data;\r\n        }),\r\n      })\r\n    );\r\n    AxiosMasterGet(\"supplier/get/all\").then((res) =>\r\n      this.setState({\r\n        listSupplier: res.data.map((list) => {\r\n          let data = {\r\n            value: list.kode_supplier,\r\n            name: `${list.nama_supplier} ( ${list.kode_supplier} )`,\r\n          };\r\n          return data;\r\n        }),\r\n      })\r\n    );\r\n    AxiosMasterGet(\"permintaan-barang/generate/no-trx\").then((res) =>\r\n      this.props.change(\"no_permintaan\", res.data[0].no_permintaan)\r\n    );\r\n  }\r\n  getSales(hasil) {\r\n    AxiosMasterGet(\"pegawai/get/by-kode-divisi/\" + hasil).then((res) =>\r\n      this.setState({\r\n        listSales: res.data.map((list) => {\r\n          let data = {\r\n            value: list.kode_pegawai,\r\n            name: list.nama_pegawai,\r\n          };\r\n          return data;\r\n        }),\r\n      })\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.props.handleSubmit} autoComplete={true}>\r\n        <div className=\"col-lg-12\">\r\n          <div className=\"col-lg-12\">\r\n            <div className=\"row\">\r\n              <div className=\"col-lg-2\">\r\n                <Field\r\n                  name=\"no_permintaan\"\r\n                  component={ReanderField}\r\n                  type=\"text\"\r\n                  label=\"Nomor Permintaan\"\r\n                  placeholder=\"Masukan Nomor Permintaan\"\r\n                  readOnly\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"divisi\"\r\n                  component={ReanderSelect}\r\n                  options={this.state.listDivisi}\r\n                  type=\"text\"\r\n                  label=\"Divisi\"\r\n                  placeholder=\"Masukan Divisi\"\r\n                  onChange={(e) => this.getSales(e)}\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"pegawai\"\r\n                  component={ReanderSelect}\r\n                  options={this.state.listSales}\r\n                  type=\"text\"\r\n                  label=\"Pegawai\"\r\n                  placeholder=\"Masukan Pegawai\"\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"tanggal\"\r\n                  component={ReanderField}\r\n                  type=\"date\"\r\n                  label=\"Tanggal\"\r\n                  placeholder=\"Masukan Tanggal\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-lg-12 mb-5\">\r\n          <div className=\"text-right\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-warning\"\r\n              onClick={() => this.props.dispatch(showModal())}\r\n            >\r\n              Tambah Barang <i className=\"fa fa-plus ml-3\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-lg-12\">\r\n          {this.props.permintaan_temp ? (\r\n            <div className=\"col-lg-12\">\r\n              <Tabel\r\n                keyField=\"kode_barcode\"\r\n                data={this.props.permintaan_temp || []}\r\n                columns={this.state.columns}\r\n                CSVExport\r\n                textEmpty=\"Silahkan Tekan Tombol Kuning Untuk Tambah Barang\"\r\n              />\r\n            </div>\r\n          ) : (\r\n            <Skeleton width={\"100%\"} height={400} />\r\n          )}\r\n        </div>\r\n        <div className=\"col-lg-12 mb-5 mt-3\">\r\n          <div className=\"text-right\">\r\n            <button className=\"btn btn-primary\">\r\n              Simpan <i className=\"fa fa-paper-plane ml-3\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\nHeadPermintaanBarang = reduxForm({\r\n  form: \"permintaanBarang\",\r\n  enableReinitialize: true,\r\n})(HeadPermintaanBarang);\r\nexport default connect(maptostate, null)(HeadPermintaanBarang);\r\n","import React, { lazy, Suspense } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport ModalGlobal from \"../../ModalGlobal.jsx\";\r\nimport {\r\n  NotifError,\r\n  NotifSucces,\r\n} from \"../../../components/notification/notification.jsx\";\r\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\r\nimport HeadPermintaanBarang from \"./HeadPermintaanBarang.jsx\";\r\nimport CetakNota from \"../CetakNota.jsx\";\r\nimport { getPermintaanTemp } from \"../../../actions/stocking_action.jsx\";\r\nimport { simpanLocal } from \"../../../config/Helper.jsx\";\r\nimport { reset } from \"redux-form\";\r\nimport { AxiosMasterGet, AxiosMasterPost } from \"../../../axios.js\";\r\nimport { multipleDeleteLocal } from \"../../../components/notification/function.jsx\";\r\n\r\nconst ModalPermintaanBarang = lazy(() => import(\"./ModalPermintaanBarang.jsx\"));\r\n\r\nconst maptostate = (state) => {\r\n  return {\r\n    permintaan_temp: state.stocking.permintaan_temp,\r\n  };\r\n};\r\n\r\nclass PermintaanBarang extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isEdit: false,\r\n      modalDialog: false,\r\n      isLoading: false,\r\n      datakategori: [\r\n        {\r\n          no_acc: \"8200930213\",\r\n          nama_bank: \"BCA\",\r\n          atas_nama: \"OCTAVIAN\",\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(getPermintaanTemp());\r\n    AxiosMasterGet(\"permintaan-barang/generate/no-trx\").then((res) =>\r\n      localStorage.setItem(\"kode_permintaan_barang\", res.data[0].no_permintaan)\r\n    );\r\n  }\r\n\r\n  handleModal(hasil) {\r\n    let local =\r\n      JSON.parse(localStorage.getItem(\"PermintaanBarang_temp_kirim\")) || [];\r\n    let local2 =\r\n      JSON.parse(localStorage.getItem(\"PermintaanBarang_temp\")) || [];\r\n    let filtered = local.findIndex(\r\n      (list) => list.kode_barcode === hasil.kode_barcode\r\n    );\r\n    let filtered2 = local2.findIndex(\r\n      (list) => list.kode_barcode === hasil.kode_barcode\r\n    );\r\n    if (filtered !== -1) {\r\n      let data = {\r\n        kode_barcode: hasil.kode_barcode,\r\n        qty: parseInt(hasil.qty) + parseFloat(local[filtered].qty),\r\n        kode_supplier: hasil.kode_supplier,\r\n      };\r\n      let dataTable = {\r\n        kode_barcode: hasil.kode_barcode,\r\n        nama_barang: hasil.nama_barang,\r\n        merk: hasil.merk,\r\n        kwalitas: hasil.kwalitas,\r\n        ukuran: hasil.ukuran,\r\n        stock: hasil.stock,\r\n        qty: parseInt(hasil.qty) + parseInt(local2[filtered2].qty),\r\n      };\r\n      local.splice(filtered, 1);\r\n      local2.splice(filtered2, 1);\r\n      local.push(data);\r\n      local2.push(dataTable);\r\n      localStorage.setItem(\"PermintaanBarang_temp\", JSON.stringify(local2));\r\n      localStorage.setItem(\r\n        \"PermintaanBarang_temp_kirim\",\r\n        JSON.stringify(local)\r\n      );\r\n      NotifSucces(\"Berhasil\");\r\n      this.props.dispatch(reset(\"ModalReturnSupplier\"));\r\n      this.props.dispatch(getPermintaanTemp());\r\n    } else {\r\n      let data = {\r\n        kode_barcode: hasil.kode_barcode,\r\n        qty: parseInt(hasil.qty),\r\n        kode_supplier: hasil.kode_supplier,\r\n      };\r\n      let dataTable = {\r\n        kode_barcode: hasil.kode_barcode,\r\n        nama_barang: hasil.nama_barang,\r\n        merk: hasil.merk,\r\n        kwalitas: hasil.kwalitas,\r\n        ukuran: hasil.ukuran,\r\n        stock: hasil.stock,\r\n        qty: hasil.qty,\r\n      };\r\n      simpanLocal(\"PermintaanBarang_temp\", dataTable)\r\n        .then(() => this.props.dispatch(reset(\"ModalPermintaanBarang\")))\r\n        .then(() => this.props.dispatch(getPermintaanTemp()));\r\n      simpanLocal(\"PermintaanBarang_temp_kirim\", data)\r\n        .then(() => this.props.dispatch(reset(\"ModalPermintaanBarang\")))\r\n        .then(() => this.props.dispatch(getPermintaanTemp()));\r\n    }\r\n  }\r\n  sendData(hasil) {\r\n    let kirim = {\r\n      no_permintaan: hasil.no_permintaan,\r\n      kode_divisi: hasil.divisi,\r\n      kode_pegawai: hasil.pegawai,\r\n      tanggal: hasil.tanggal,\r\n      detail_barang: JSON.parse(\r\n        localStorage.getItem(\"PermintaanBarang_temp_kirim\")\r\n      ),\r\n    };\r\n    // INISIALISASI AUTOTABLE\r\n    const tableRows = [];\r\n    let table = JSON.parse(localStorage.getItem(\"PermintaanBarang_temp\"));\r\n    table.forEach((data, i) => {\r\n      const rows = [\r\n        ++i,\r\n        data.kode_barcode,\r\n        data.nama_barang,\r\n        data.merk,\r\n        data.kwalitas,\r\n        data.qty,\r\n      ];\r\n      tableRows.push(rows);\r\n    });\r\n    let columnTabel = [\"NO\", \"BARCODE\", \"JENIS BARANG\", \"MERK\", \"KW\", \"QTY\"];\r\n    // INISIALISASI SELESAI -> PANGGIL AXIOS DAN PANGGIL PRINT SAAT AXIOS BERHASIL\r\n    AxiosMasterPost(\"permintaan-barang/post-transaksi\", kirim)\r\n      .then(() => NotifSucces(\"Berhasil Menyimpan Data\"))\r\n      .then(() =>\r\n        CetakNota(\r\n          \"Tanggal\",\r\n          hasil.tanggal,\r\n          \"PEGAWAI\",\r\n          hasil.pegawai,\r\n          \"NO PERMINTAAN\",\r\n          hasil.no_permintaan,\r\n          \"DIVISI\",\r\n          hasil.divisi,\r\n          \"ADMIN\",\r\n          \"01-28-2021\",\r\n          \"ADMIN\",\r\n          columnTabel,\r\n          \"BUKTI PERMINTAAN BARANG\",\r\n          tableRows,\r\n          [],\r\n          true\r\n        )\r\n      )\r\n      .then(() =>\r\n        multipleDeleteLocal([\r\n          \"PermintaanBarang_temp_kirim\",\r\n          \"PermintaanBarang_temp\",\r\n          \"kode_permintaan_barang\",\r\n        ])\r\n      )\r\n      .then(() => this.props.dispatch(reset(\"permintaanBarang\")))\r\n      .then(() => this.props.dispatch(getPermintaanTemp()))\r\n      .catch((err) => NotifError(err.response.data));\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Data Master</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Permintaan Barang</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Permintaan Barang </h1>\r\n        <Panel>\r\n          <PanelHeader>Permintaan Barang</PanelHeader>\r\n          <br />\r\n          <div className=\"col-lg-12\">\r\n            <HeadPermintaanBarang\r\n              onSubmit={(data) => this.sendData(data)}\r\n              permintaan_temp={this.props.permintaan_temp}\r\n            />\r\n          </div>\r\n          {/* Master Kategori */}\r\n\r\n          <br />\r\n          {/* End Master Kategori */}\r\n          <ModalGlobal\r\n            title={\r\n              this.state.isEdit\r\n                ? \"Edit Data Permintaan Barang\"\r\n                : \"Tambah Data Barang\"\r\n            }\r\n            content={\r\n              <Suspense\r\n                fallback={<Skeleton width={\"100%\"} height={50} count={2} />}\r\n              >\r\n                <ModalPermintaanBarang\r\n                  onSubmit={(data) => this.handleModal(data)}\r\n                  onSend={this.props.onSend}\r\n                  isEdit={this.state.isEdit}\r\n                />\r\n              </Suspense>\r\n            }\r\n          />\r\n\r\n          {/* End Tambah Master Kategori  */}\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(maptostate, null)(PermintaanBarang);\r\n","import Swal from \"sweetalert2\";\r\n\r\nexport const simpanLocal = (nama, data) => {\r\n  return new Promise((resolve, reject) => {\r\n    let array = JSON.parse(localStorage.getItem(nama)) || [];\r\n    array.push(data);\r\n    localStorage.setItem(nama, JSON.stringify(array));\r\n    Swal.fire({\r\n      position: \"top-right\",\r\n      text: \"Tambah Data Berhasil\",\r\n      timer: 2000,\r\n      icon: \"success\",\r\n      showConfirmButton: false,\r\n    })\r\n      .then(() => resolve(\"Berhaisl\"))\r\n      .catch(() => reject(\"GAGAL\"));\r\n  });\r\n};\r\n"],"sourceRoot":""}