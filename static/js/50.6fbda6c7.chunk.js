(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1052:function(a,e,t){"use strict";t.r(e);var n=t(0),l=t.n(n),o=t(5),r=t(33),c=t(67),s=t(160),m=t(161),i=t(6),p=t(24),u=t(10),d=t(52),b=t(44),h=t(389);class g extends n.Component{constructor(a){super(a),this.state={nama_customer:!1,no_bon:!1,columns:[{dataField:"tgl_transaksi",text:"Tanggal"},{dataField:"no_bon",text:"Nomor bon"},{dataField:"nama_customer",text:"Nama Customer"},{dataField:"alamat",text:"Alamat"},{dataField:"nopol",text:"Nomor Polisi"},{dataField:"saldo_piutang",text:"Total",formatter:a=>a.toLocaleString("id-ID")},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e)=>{let t={no_bayar_customer:localStorage.getItem("nomor_bayar")||"",tanggal:e.tgl_transaksi,no_bon:e.no_bon,kode_customer:localStorage.getItem("kode_customer_piutang"),total_pembayaran:e.saldo_piutang};return l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{type:"button",onClick:()=>this.showBayar(t),className:"btn btn-success mr-3"},"Bayar",l.a.createElement("i",{className:"fa fa-money-bill-alt ml-2"}))))}}]}}showBayar(a){this.props.dispatch(Object(i.Wb)()),this.props.dispatch(Object(p.C)(a))}componentDidMount(){Object(u.b)("bayar-piutang-customer/generate/no-trx").then(a=>this.props.change("nomor_bayar",a.data[0].no_bayar_customer)).catch(a=>Object(b.g)("Error Get Nomor bayar \nError : ".concat(a.response.data))),this.props.dispatch(Object(i.xb)()),this.props.change("tanggal",Object(d.b)()),this.props.dispatch(Object(p.x)())}setCustomer(a){let e=a.split("||");this.props.change("alamat",e[1]),this.props.change("no_polisi",e[2]),this.props.change("kode_customer",e[0]),localStorage.setItem("kode_customer_piutang",e[0]),this.setState({nama_customer:e[3]})}render(){return l.a.createElement("form",{onSubmit:this.props.handleSubmit},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(s.a,{name:"nomor_bayar",component:b.c,type:"text",label:"Nomor Bayar",placeholder:"Masukan Nomor Bayar",readOnly:!0})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(s.a,{name:"tanggal",component:b.c,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal",onChange:a=>localStorage.setItem("tanggal_bayar_piutang",a.target.value)})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(s.a,{name:"no_bon",component:b.c,type:"text",label:"Nomor Bon",placeholder:"Masukan Nomor Bon",onChange:a=>this.setState({no_bon:a.target.value})})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(s.a,{name:"nama_customer",component:b.e,options:this.props.listCustomer.map(a=>{return{value:"".concat(a.kode_customer,"||").concat(a.alamat,"||").concat(a.nopol_kendaraan,"||").concat(a.nama_customer),name:a.nama_customer}}),onChange:a=>this.setCustomer(a),type:"text",label:"Nama Customer",placeholder:"Masukan Nama Customer"})),l.a.createElement("div",{className:"col-lg-4 d-none"},l.a.createElement(s.a,{name:"kode_customer",component:b.c,type:"text",label:"Alamat",placeholder:"Masukan Alamat",readOnly:!0})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(s.a,{name:"alamat",component:b.c,type:"text",label:"Alamat",placeholder:"Masukan Alamat",readOnly:!0})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(s.a,{name:"no_polisi",component:b.c,type:"text",label:"Nomor Polisi",placeholder:"Masukan Nomor Polisi",readOnly:!0})),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{className:"btn btn-primary"},"Cari ",l.a.createElement("i",{className:"fa fa-search ml-3"})))),l.a.createElement("div",{className:"col-lg-12 mt-3"},l.a.createElement(h.a,{keyField:"no_bon",data:this.state.nama_customer?this.props.listpiutangcustomer.filter(a=>a.nama_customer===this.state.nama_customer):this.props.listpiutangcustomer.filter(a=>a.no_bon===this.state.no_bon),columns:this.state.columns,emptyText:"Silahkan Isi Nomor Bon atau Pilih Customer Untuk Melihat Data",empty:!0})))))}}g=Object(m.a)({form:"HeadPembayaranPiutang",enableReinitialize:!0})(g);var E=Object(r.b)(a=>({initialState:{nomor_bayar:localStorage.getItem("nomor_bayar_piutang")},listCustomer:a.datamaster.listcustomer,listpiutangcustomer:a.transaksi.listpiutangcustomer}))(g),_=t(388),y=t(173),N=t(397);const k=Object(N.createNumberMask)({prefix:"Rp. ",suffix:" ,-",locale:"id-ID"});class x extends n.Component{constructor(a){super(a),this.state={type_bayar:"row",cash:"col-lg-12 d-none",transfer:"col-lg-12 d-none"}}componentDidMount(){this.props.dispatch(Object(i.vb)())}render(){return l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("form",{onSubmit:this.props.handleSubmit},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6 text-center"},l.a.createElement("h3",null,"Total Piutang"),l.a.createElement("h2",null," ".concat(parseFloat(this.props.total_piutang).toLocaleString("id-ID")))),l.a.createElement("div",{className:"col-lg-6 text-center"},l.a.createElement("h3",null,"Total Pembayaran"),l.a.createElement("h2",null," ".concat(parseFloat(this.props.total_pembayaran).toLocaleString("id-ID")))),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("h4",null,"Pembayaran Cash")),l.a.createElement("div",{className:"col-lg-12 mt-2"},l.a.createElement(s.a,Object.assign({name:"cash",component:b.d,type:"text",label:"Cash Rp",placeholder:"Masukan Cash Rp"},k))),l.a.createElement("div",{className:"col-lg-12 mt-2 d-none"},l.a.createElement(s.a,Object.assign({name:"total_piutang",component:b.d,type:"text",label:"Cash Rp",placeholder:"Masukan Cash Rp"},k)))),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("h4",null,"Pembayaran Transfer")),l.a.createElement("div",{className:"col-lg-12 mt-2"},l.a.createElement(s.a,Object.assign({name:"transfer",component:b.d,type:"telp",label:"Transfer Rp",placeholder:"Masukan Transfer Rp"},k))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(s.a,{name:"ac_asal",component:b.d,type:"text",label:"A/C Asal",placeholder:"Masukan AC Asal"})),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(s.a,{name:"ac_tujuan",component:b.e,options:this.props.listbank.map(a=>{return{value:a.no_ac,name:a.atas_nama}}),type:"text",label:"A/C tujuan",placeholder:"Masukan A/C tujuan"}))),l.a.createElement("div",{className:"col-lg-3 d-none"},l.a.createElement(s.a,{name:"no_bon",component:b.d,type:"text",label:"bon",placeholder:"Masukan bon"})),l.a.createElement("div",{className:"col-lg-3 d-none"},l.a.createElement(s.a,{name:"tanggal",component:b.d,type:"text",label:"Tanggal",placeholder:"Masukan Tanggal"})),l.a.createElement("div",{className:"col-lg-3 d-none"},l.a.createElement(s.a,{name:"kode_customer",component:b.d,type:"text",label:"customer",placeholder:"Masukan customer"})),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{className:"btn btn-primary",disabled:this.props.total_pembayaran!==this.props.total_piutang},"Simpan ",l.a.createElement("i",{className:"fa fa-paper-plane ml-3"})),l.a.createElement("p",{className:"text-red mt-1"},"Mohon Bayar Sesuai Nominal Piutang, agar Bisa disimpan"))))))}}x=Object(m.a)({form:"ModalPembayaranPiutang",enableReinitialize:!0,validate:a=>{const e={};return a.cash||a.transfer||(e.cash="Mohon isi Salah Satu / keduanya",e.transfer="Mohon isi Salah Satu / keduanya"),a.cash+a.transfer>a.total_piutang&&(e.cash="Tidak Boleh Lebih Dari Total Piutang, Mohon Kurangi",e.transfer="Tidak Boleh Lebih Dari Total Piutang, Mohon Kurangi"),e}})(x);const v=Object(y.a)("ModalPembayaranPiutang");var f=Object(r.b)(a=>{const e=v(a,"cash","transfer"),t=e.cash,n=e.transfer;return{total_piutang:a.transaksi.total_piutang.total_pembayaran,total_pembayaran:parseFloat(t||0)+parseFloat(n||0),listbank:a.datamaster.listbank,initialValues:{total_piutang:a.transaksi.total_piutang.total_pembayaran,kode_customer:a.transaksi.total_piutang.kode_customer,no_bon:a.transaksi.total_piutang.no_bon,tanggal:a.transaksi.total_piutang.tanggal}}})(x),S=t(83);t(172);var O=(a="",e="",t="",n="",l="",o="",r="",c="",s="",m="",i="",p=[],u="",d,b,h)=>{const g=new S.default;g.autoTable(p,d,{foot:b,startY:40,theme:"plain",bodyStyles:{lineWidth:.02,lineColor:"#000"},headStyles:{lineWidth:.02,lineColor:"#000",fillColor:[187,187,187]}});let E=g.lastAutoTable.finalY+10;g.text(u,14,15),g.setFontSize(10),g.text("".concat(a,"\t: ").concat(e),14,25),g.text("".concat(t,"\t: ").concat(n),120,25),g.text("".concat(l,"\t: ").concat(o),14,30),g.text("".concat(r,"\t: ").concat(c),120,30),h?(g.text("Mengetahui",27,E+5),g.text("(.................................)",20,E+25),g.text("Penerima",140,E+5),g.text("(.................................)",130,E+25)):(g.text("User\t: ".concat(s),14,E+10),g.text("Cetak\t: ".concat(m),14,E+16),g.text("Valid\t: ".concat(i),14,E+22));var _="<embed width='100%' height='100%' src='"+g.output("datauristring")+"'/>",y=window.open();y.document.open(),y.document.write(_),y.document.close()};e.default=Object(r.b)(a=>({kunci_temp:a.stocking.kunci_temp,noFaktur:a.datamaster.noFaktur}),null)(class extends l.a.Component{constructor(a){super(a),this.state={isEdit:!1,modalDialog:!1,isLoading:!1}}componentDidMount(){this.props.dispatch(Object(i.Ab)()),Object(u.b)("bayar-piutang-customer/generate/no-trx").then(a=>localStorage.setItem("nomor_bayar_piutang",a.data[0].no_bayar_customer)).catch(a=>Object(b.g)("Error Get Nomor bayar \nError : ".concat(a.response.data)))}handleSubmit(a){void 0!==a.cash?console.log("INI CAHS"):console.log("INI TRANSFER");let e={no_bayar_customer:localStorage.getItem("nomor_bayar_piutang"),tanggal:a.tanggal,no_bon:a.no_bon,kode_customer:a.kode_customer,total_pembayaran:parseFloat(a.cash)+parseFloat(a.transfer),cash_rp:a.cash,no_ref_cash:this.props.noFaktur,transfer_rp:a.transfer,no_ref:this.props.noFaktur,no_ac_asal:a.ac_asal,no_ac_tujuan:"".concat(a.ac_tujuan)};console.log(JSON.stringify(e)),Object(u.c)("bayar-piutang-customer/post-transaksi",e).then(()=>Object(b.b)("Pembayaran Berhasl")).then(()=>O("Tanggal",Object(d.b)(),"Nomor Bon",localStorage.getItem("nomor_bayar_piutang"),"","","","",Object(b.k)().user_name,Object(d.b)(),Object(b.k)().user_name,["NO","JENIS BAYAR","TOTAL"],"BUKTI PEMBAYARAN PIUTANG",[["1","Cash","".concat(parseFloat(a.cash).toLocaleString("id-ID")||0)],["2","Transfer","".concat(parseFloat(a.transfer).toLocaleString("id-ID")||0)]],[["","Total Bayar","".concat((parseFloat(a.transfer||0)+parseFloat(a.cash||0)).toLocaleString("id-ID"))]])).then(()=>Object(d.c)(["nomor_bayar_piutang","noFaktur","kode_customer_piutang"])).then(()=>this.props.dispatch(Object(i.Ab)())).catch(a=>Object(b.g)("Gagal, Error : ".concat(a.response.data)))}render(){return l.a.createElement("div",null,l.a.createElement("ol",{className:"breadcrumb float-xl-right"},l.a.createElement("li",{className:"breadcrumb-item"},l.a.createElement(o.b,{to:"#"},"Transaksi")),l.a.createElement("li",{className:"breadcrumb-item active"},"Pembayaran Supplier")),l.a.createElement("h1",{className:"page-header"},"Pembayaran Supplier "),l.a.createElement(c.a,null,l.a.createElement(c.c,null,"Pembayaran Supplier"),l.a.createElement(c.b,null,l.a.createElement("br",null),l.a.createElement(E,{onSubmit:a=>this.handleSubmit(a),listMerk:this.state.listMerk,bayar:!0}))),l.a.createElement(_.a,{content:l.a.createElement(f,{onSubmit:a=>this.handleSubmit(a)}),title:"Pembayaran Supplier"}))}})},388:function(a,e,t){"use strict";var n=t(0),l=t.n(n),o=t(33),r=t(403),c=t(401),s=t(402),m=t(6);e.a=Object(o.b)(a=>({isOpen:a.datamaster.modalDialog}),null)(class extends n.Component{constructor(a){super(a),this.state={}}render(){return l.a.createElement(r.a,{backdrop:"static",keyboard:!1,isOpen:this.props.isOpen,toggle:()=>this.props.dispatch(Object(m.Tb)()),size:this.props.size||"xl"},l.a.createElement(c.a,{toggle:()=>this.props.dispatch(Object(m.Tb)())},this.props.title),l.a.createElement(s.a,null,this.props.content))}})},389:function(a,e,t){"use strict";var n=t(0),l=t.n(n),o=t(395),r=t.n(o),c=t(398),s=t.n(c),m=t(399),i=t.n(m),p=t(390),u=t(112),d=t.n(u);const b=c.Search.SearchBar,h=c.CSVExport.ExportCSVButton;e.a=function(a){let e=a.textEmpty,t=a.handleClick,n=a.tambahData,o=a.expandRow,c=a.selectRow,m=a.exportCSV;return a.data?l.a.createElement(s.a,{keyField:a.keyField,data:a.data||[],columns:a.columns,search:!0},a=>l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"text-left"},l.a.createElement(b,a.searchProps))),l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"text-right"},n&&l.a.createElement("button",{onClick:t,className:"btn btn-primary",type:"button"},"Tambah Data",l.a.createElement("i",{className:"fa fa-plus ml-3"})))),l.a.createElement("hr",null),l.a.createElement("div",{className:"col-12"},l.a.createElement(r.a,Object.assign({pagination:i()(),selectRow:c,expandRow:o},a.baseProps,{striped:!0,noDataIndication:l.a.createElement(p.a,{text:e||"Tidak Ada Data"})})),l.a.createElement("br",null),m&&l.a.createElement(h,a.csvProps,"Export CSV!!")))):a.empty?l.a.createElement(s.a,{keyField:a.keyField,data:a.data||[],columns:a.columns,search:!0},a=>l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"text-left"},l.a.createElement(b,a.searchProps))),l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"text-right"},n&&l.a.createElement("button",{onClick:t,className:"btn btn-primary",type:"button"},"Tambah Data",l.a.createElement("i",{className:"fa fa-plus ml-3"})))),l.a.createElement("hr",null),l.a.createElement("div",{className:"col-12"},l.a.createElement(r.a,Object.assign({pagination:i()()},a.baseProps,{noDataIndication:l.a.createElement(p.a,{text:e||"Tidak Ada Data"})})),l.a.createElement("br",null),a.CSVExport&&l.a.createElement(h,a.csvProps,"Export CSV!!")))):l.a.createElement(d.a,{width:"100%",height:250})}},390:function(a,e,t){"use strict";var n=t(0),l=t.n(n),o=t(391),r=t.n(o);e.a=function(a){return l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"text-center"},l.a.createElement("img",{src:r.a,width:"250",height:"250",alt:"Empty"}),l.a.createElement("h5",null,a.text)))}},391:function(a,e,t){a.exports=t.p+"static/media/empty.02c14787.svg"}}]);
//# sourceMappingURL=50.6fbda6c7.chunk.js.map