{"version":3,"sources":["pages/Stoking/PermintaanBarang/HeadPermintaanBarang.jsx","pages/Stoking/PermintaanBarang/PermintaanBarang.jsx","validasi/normalize.jsx","config/Helper.jsx"],"names":["HeadPermintaanBarang","Component","constructor","props","super","this","state","listDivisi","listSales","listSupplier","listSPK","columns","dataField","text","sort","csvExport","headerClasses","formatter","rowcontent","row","setState","react_default","a","createElement","className","type","onClick","deleteBarang","Swal","fire","title","icon","position","cancelButtonText","showCancelButton","confirmButtonText","showConfirmButton","then","result","isConfirmed","deleteLocalItemBarcode","kode_barcode","dispatch","getPermintaanTemp","componentDidMount","getSales","AxiosMasterGet","res","change","data","no_permintaan","getToday","catch","err","ToastError","concat","response","getSPK","PermintaanBarang_temp_kirim","filtered","filter","list","no_daftar","console","log","kode_pegawai","detail_barang","forEach","push","kode_supplier","qty","localStorage","setItem","JSON","stringify","render","onSubmit","handleSubmit","autoComplete","Field","name","component","ReanderField","label","placeholder","readOnly","ReanderSelect","options","map","value","nama_customer","onChange","listsales","kode_divisi","nama_pegawai","loading","onSend","validate","required","showModal","permintaan_temp","tabel","keyField","CSVExport","textEmpty","lib_default","width","height","Fragment","reduxForm","form","enableReinitialize","connect","initialValues","getItem","datamaster","ModalPermintaanBarang","lazy","__webpack_require__","e","bind","stocking","React","isEdit","modalDialog","isLoading","datakategori","no_acc","nama_bank","atas_nama","removeItem","handleModal","hasil","local","parse","local2","findIndex","filtered2","parseInt","parseFloat","dataTable","nama_barang","merk_barang","merk","kwalitas","ukuran","stock","splice","NotifSucces","reset","simpanLocal","sendData","onProgress","kirim","divisi","pegawai","no_daftar_service","no_spk","tanggal","tableRows","i","rows","columnTabel","AxiosMasterPost","CetakNota","multipleDeleteLocal","onFinish","NotifError","react_router_dom","to","panel","PermintaanBarang_HeadPermintaanBarang","ModalGlobal","content","react","fallback","count","d","__webpack_exports__","undefined","sweetalert2__WEBPACK_IMPORTED_MODULE_0__","sweetalert2__WEBPACK_IMPORTED_MODULE_0___default","n","nama","Promise","resolve","reject","array","timer"],"mappings":"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","file":"static/js/22.7f895254.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { getSales, showModal } from \"../../../actions/datamaster_action\";\r\nimport {\r\n  deleteLocalItemBarcode,\r\n  ReanderField,\r\n  ReanderSelect,\r\n  ToastError,\r\n} from \"../../../components/notification/notification\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport Swal from \"sweetalert2\";\r\nimport { getPermintaanTemp } from \"../../../actions/stocking_action\";\r\nimport { AxiosMasterGet } from \"../../../axios\";\r\nimport Tabel from \"../../../components/Tabel/tabel\";\r\nimport { getToday } from \"../../../components/notification/function\";\r\nimport { required } from \"../../../validasi/normalize\";\r\n\r\nconst maptostate = (state) => {\r\n  return {\r\n    initialValues: {\r\n      no_permintaan: localStorage.getItem(\"kode_permintaan_barang\") || \"\",\r\n    },\r\n    onSend: state.datamaster.onSend,\r\n    listsales: state.datamaster.listsales,\r\n  };\r\n};\r\nclass HeadPermintaanBarang extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      listDivisi: [],\r\n      listSales: [],\r\n      listSupplier: [],\r\n      listSPK: [],\r\n      columns: [\r\n        {\r\n          dataField: \"kode_barcode\",\r\n          text: \"Kode barcode\",\r\n          sort: true,\r\n        },\r\n        {\r\n          dataField: \"nama_barang\",\r\n          text: \"Nama Barang\",\r\n        },\r\n        {\r\n          dataField: \"merk_barang\",\r\n          text: \"Merk\",\r\n        },\r\n        {\r\n          dataField: \"kwalitas\",\r\n          text: \"Kualitas\",\r\n        },\r\n        {\r\n          dataField: \"ukuran\",\r\n          text: \"Ukuran\",\r\n        },\r\n\r\n        {\r\n          dataField: \"qty\",\r\n          text: \"Qty\",\r\n        },\r\n\r\n        {\r\n          dataField: \"action\",\r\n          text: \"Action\",\r\n          csvExport: false,\r\n          headerClasses: \"text-center\",\r\n          formatter: (rowcontent, row) => {\r\n            this.setState({});\r\n            return (\r\n              <div className=\"row text-center\">\r\n                <div className=\"col-12\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => this.deleteBarang(row)}\r\n                    className=\"btn btn-danger\"\r\n                  >\r\n                    Hapus\r\n                    <i className=\"fa fa-trash ml-2\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n      ],\r\n    };\r\n  }\r\n  deleteBarang(row) {\r\n    Swal.fire({\r\n      title: \"Anda Yakin !!\",\r\n      text: \"Ingin Menghapus Data Ini ?\",\r\n      icon: \"warning\",\r\n      position: \"top-center\",\r\n      cancelButtonText: \"Tidak\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"OK\",\r\n      showConfirmButton: true,\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        deleteLocalItemBarcode(\"PermintaanBarang_temp\", row.kode_barcode);\r\n        // deleteLocalItemBarcode(\"PermintaanBarang_temp\", row.kode_barcode);\r\n        this.props.dispatch(getPermintaanTemp());\r\n      }\r\n    });\r\n  }\r\n  componentDidMount() {\r\n    this.props.dispatch(getSales());\r\n    AxiosMasterGet(\"permintaan-barang/generate/no-trx\").then((res) =>\r\n      this.props.change(\"no_permintaan\", res.data[0].no_permintaan)\r\n    );\r\n    this.props.change(\"tanggal\", getToday());\r\n    AxiosMasterGet(\"daftar-service/getDaftarServiceAllActive\")\r\n      .then((res) =>\r\n        this.setState({\r\n          listSPK: res && res.data,\r\n        })\r\n      )\r\n      .catch((err) =>\r\n        ToastError(`Erorr Get SPK , Detail : ${err.response.data}`)\r\n      );\r\n  }\r\n  getSPK(data) {\r\n    let PermintaanBarang_temp_kirim = [];\r\n    let filtered = this.state.listSPK.filter((list) => list.no_daftar === data);\r\n    console.log(filtered.kode_pegawai);\r\n    this.props.change(\"pegawai\", filtered[0].kode_pegawai);\r\n    filtered[0].detail_barang.forEach((list) => {\r\n      PermintaanBarang_temp_kirim.push({\r\n        kode_barcode: list.kode_barcode,\r\n        kode_supplier: list.kode_supplier,\r\n        qty: list.qty,\r\n      });\r\n    });\r\n    localStorage.setItem(\r\n      \"PermintaanBarang_temp\",\r\n      JSON.stringify(filtered[0].detail_barang)\r\n    );\r\n    localStorage.setItem(\r\n      \"PermintaanBarang_temp_kirim\",\r\n      JSON.stringify(PermintaanBarang_temp_kirim)\r\n    );\r\n    this.props.dispatch(getPermintaanTemp());\r\n  }\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.props.handleSubmit} autoComplete={true}>\r\n        <div className=\"col-lg-12\">\r\n          <div className=\"col-lg-12\">\r\n            <div className=\"row\">\r\n              <div className=\"col-lg-2\">\r\n                <Field\r\n                  name=\"no_permintaan\"\r\n                  component={ReanderField}\r\n                  type=\"text\"\r\n                  label=\"Nomor Permintaan\"\r\n                  placeholder=\"Masukan Nomor Permintaan\"\r\n                  readOnly\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"no_spk\"\r\n                  component={ReanderSelect}\r\n                  options={this.state.listSPK.map((list) => {\r\n                    let data = {\r\n                      value: list.no_daftar,\r\n                      name: `${list.no_daftar} - ${list.nama_customer}`,\r\n                    };\r\n                    return data;\r\n                  })}\r\n                  type=\"text\"\r\n                  label=\"Nomor Daftar Service\"\r\n                  placeholder=\"Masukan Nomor Daftar Service\"\r\n                  onChange={(data) => this.getSPK(data)}\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"pegawai\"\r\n                  component={ReanderSelect}\r\n                  options={this.props.listsales\r\n                    .filter((data) => data.kode_divisi === \"MKN\")\r\n                    .map((list) => {\r\n                      let data = {\r\n                        value: list.kode_pegawai,\r\n                        name: list.nama_pegawai,\r\n                      };\r\n                      return data;\r\n                    })}\r\n                  type=\"text\"\r\n                  label=\"Pegawai\"\r\n                  placeholder=\"Masukan Pegawai\"\r\n                  loading={this.props.onSend}\r\n                  validate={required}\r\n                  readOnly\r\n                />\r\n              </div>\r\n              <div className=\"col-lg-3\">\r\n                <Field\r\n                  name=\"tanggal\"\r\n                  component={ReanderField}\r\n                  type=\"date\"\r\n                  label=\"Tanggal\"\r\n                  placeholder=\"Masukan Tanggal\"\r\n                  validate={required}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-lg-12 mb-5\">\r\n          <div className=\"text-right\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-warning\"\r\n              onClick={() => this.props.dispatch(showModal())}\r\n            >\r\n              Tambah Barang <i className=\"fa fa-plus ml-3\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-lg-12\">\r\n          {this.props.permintaan_temp ? (\r\n            <div className=\"col-lg-12\">\r\n              <Tabel\r\n                keyField=\"kode_barcode\"\r\n                data={this.props.permintaan_temp || []}\r\n                columns={this.state.columns}\r\n                CSVExport\r\n                textEmpty=\"Silahkan Pilih Nomor Daftar Service untuk melihat barang\"\r\n              />\r\n            </div>\r\n          ) : (\r\n            <Skeleton width={\"100%\"} height={400} />\r\n          )}\r\n        </div>\r\n        <div className=\"col-lg-12 mb-5 mt-3\">\r\n          <div className=\"text-right\">\r\n            <button className=\"btn btn-primary\">\r\n              {this.props.onSend ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Menyimpan\r\n                </>\r\n              ) : (\r\n                <>\r\n                  Simpan <i className=\"fa fa-paper-plane ml-3 \"></i>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\nHeadPermintaanBarang = reduxForm({\r\n  form: \"permintaanBarang\",\r\n  enableReinitialize: true,\r\n})(HeadPermintaanBarang);\r\nexport default connect(maptostate, null)(HeadPermintaanBarang);\r\n","import React, { lazy, Suspense } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport ModalGlobal from \"../../ModalGlobal.jsx\";\r\nimport {\r\n  NotifError,\r\n  NotifSucces,\r\n} from \"../../../components/notification/notification.jsx\";\r\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\r\nimport HeadPermintaanBarang from \"./HeadPermintaanBarang.jsx\";\r\nimport CetakNota from \"../CetakNota.jsx\";\r\nimport { getPermintaanTemp } from \"../../../actions/stocking_action.jsx\";\r\nimport { simpanLocal } from \"../../../config/Helper.jsx\";\r\nimport { reset } from \"redux-form\";\r\nimport { AxiosMasterGet, AxiosMasterPost } from \"../../../axios.js\";\r\nimport { multipleDeleteLocal } from \"../../../components/notification/function.jsx\";\r\nimport { onFinish, onProgress } from \"../../../actions/datamaster_action.jsx\";\r\n\r\nconst ModalPermintaanBarang = lazy(() => import(\"./ModalPermintaanBarang.jsx\"));\r\n\r\nconst maptostate = (state) => {\r\n  return {\r\n    permintaan_temp: state.stocking.permintaan_temp,\r\n  };\r\n};\r\n\r\nclass PermintaanBarang extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isEdit: false,\r\n      modalDialog: false,\r\n      isLoading: false,\r\n      datakategori: [\r\n        {\r\n          no_acc: \"8200930213\",\r\n          nama_bank: \"BCA\",\r\n          atas_nama: \"OCTAVIAN\",\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    localStorage.removeItem(\"PermintaanBarang_temp\");\r\n    localStorage.removeItem(\"PermintaanBarang_temp_kirim\");\r\n    this.props.dispatch(getPermintaanTemp());\r\n    AxiosMasterGet(\"permintaan-barang/generate/no-trx\").then((res) =>\r\n      localStorage.setItem(\"kode_permintaan_barang\", res.data[0].no_permintaan)\r\n    );\r\n  }\r\n\r\n  handleModal(hasil) {\r\n    let local =\r\n      JSON.parse(localStorage.getItem(\"PermintaanBarang_temp_kirim\")) || [];\r\n    let local2 =\r\n      JSON.parse(localStorage.getItem(\"PermintaanBarang_temp\")) || [];\r\n    let filtered = local.findIndex(\r\n      (list) => list.kode_barcode === hasil.kode_barcode\r\n    );\r\n    let filtered2 = local2.findIndex(\r\n      (list) => list.kode_barcode === hasil.kode_barcode\r\n    );\r\n    if (filtered !== -1) {\r\n      let data = {\r\n        kode_barcode: hasil.kode_barcode,\r\n        qty: parseInt(hasil.qty) + parseFloat(local[filtered].qty),\r\n        kode_supplier: hasil.kode_supplier,\r\n      };\r\n      let dataTable = {\r\n        kode_barcode: hasil.kode_barcode,\r\n        nama_barang: hasil.nama_barang,\r\n        merk_barang: hasil.merk,\r\n        kwalitas: hasil.kwalitas,\r\n        ukuran: hasil.ukuran,\r\n        stock: hasil.stock,\r\n        qty: parseInt(hasil.qty) + parseInt(local2[filtered2].qty),\r\n      };\r\n      local.splice(filtered, 1);\r\n      local2.splice(filtered2, 1);\r\n      local.push(data);\r\n      local2.push(dataTable);\r\n      localStorage.setItem(\"PermintaanBarang_temp\", JSON.stringify(local2));\r\n      localStorage.setItem(\r\n        \"PermintaanBarang_temp_kirim\",\r\n        JSON.stringify(local)\r\n      );\r\n      NotifSucces(\"Berhasil\");\r\n      this.props.dispatch(reset(\"ModalReturnSupplier\"));\r\n      this.props.dispatch(getPermintaanTemp());\r\n    } else {\r\n      let data = {\r\n        kode_barcode: hasil.kode_barcode,\r\n        qty: parseInt(hasil.qty),\r\n        kode_supplier: hasil.kode_supplier,\r\n      };\r\n      let dataTable = {\r\n        kode_barcode: hasil.kode_barcode,\r\n        nama_barang: hasil.nama_barang,\r\n        merk_barang: hasil.merk,\r\n        kwalitas: hasil.kwalitas,\r\n        ukuran: hasil.ukuran,\r\n        stock: hasil.stock,\r\n        qty: hasil.qty,\r\n      };\r\n      simpanLocal(\"PermintaanBarang_temp\", dataTable)\r\n        .then(() => this.props.dispatch(reset(\"ModalPermintaanBarang\")))\r\n        .then(() => this.props.dispatch(getPermintaanTemp()));\r\n      simpanLocal(\"PermintaanBarang_temp_kirim\", data)\r\n        .then(() => this.props.dispatch(reset(\"ModalPermintaanBarang\")))\r\n        .then(() => this.props.dispatch(getPermintaanTemp()));\r\n    }\r\n  }\r\n  sendData(hasil) {\r\n    this.props.dispatch(onProgress());\r\n    let kirim = {\r\n      no_permintaan: hasil.no_permintaan,\r\n      kode_divisi: hasil.divisi || \"MKN\",\r\n      kode_pegawai: hasil.pegawai,\r\n      no_daftar_service: hasil.no_spk,\r\n      tanggal: hasil.tanggal,\r\n      detail_barang: JSON.parse(\r\n        localStorage.getItem(\"PermintaanBarang_temp_kirim\")\r\n      ),\r\n    };\r\n    // INISIALISASI AUTOTABLE\r\n    const tableRows = [];\r\n    let table = JSON.parse(localStorage.getItem(\"PermintaanBarang_temp\"));\r\n    table.forEach((data, i) => {\r\n      const rows = [\r\n        ++i,\r\n        data.kode_barcode,\r\n        data.nama_barang,\r\n        data.merk_barang,\r\n        data.kwalitas,\r\n        data.qty,\r\n      ];\r\n      tableRows.push(rows);\r\n    });\r\n    let columnTabel = [\"NO\", \"BARCODE\", \"JENIS BARANG\", \"MERK\", \"KW\", \"QTY\"];\r\n    // INISIALISASI SELESAI -> PANGGIL AXIOS DAN PANGGIL PRINT SAAT AXIOS BERHASIL\r\n    AxiosMasterPost(\"permintaan-barang/post-transaksi\", kirim)\r\n      .then(() => NotifSucces(\"Berhasil Menyimpan Data\"))\r\n      .then(() =>\r\n        CetakNota(\r\n          \"Tanggal\",\r\n          hasil.tanggal,\r\n          \"PEGAWAI\",\r\n          hasil.pegawai,\r\n          \"NO PERMINTAAN\",\r\n          hasil.no_permintaan,\r\n          \"DIVISI\",\r\n          hasil.divisi,\r\n          \"ADMIN\",\r\n          \"01-28-2021\",\r\n          \"ADMIN\",\r\n          columnTabel,\r\n          \"BUKTI PERMINTAAN BARANG\",\r\n          tableRows,\r\n          [],\r\n          true\r\n        )\r\n      )\r\n      .then(() =>\r\n        multipleDeleteLocal([\r\n          \"PermintaanBarang_temp_kirim\",\r\n          \"PermintaanBarang_temp\",\r\n          \"kode_permintaan_barang\",\r\n        ])\r\n      )\r\n      .then(() => this.props.dispatch(reset(\"permintaanBarang\")))\r\n      .then(() => this.props.dispatch(getPermintaanTemp()))\r\n      .then(() => this.props.dispatch(onFinish()))\r\n      .catch((err) =>\r\n        NotifError(err.response.data).then(() =>\r\n          this.props.dispatch(onFinish())\r\n        )\r\n      );\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Data Master</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Permintaan Barang</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Permintaan Barang </h1>\r\n        <Panel>\r\n          <PanelHeader>Permintaan Barang</PanelHeader>\r\n          <br />\r\n          <div className=\"col-lg-12\">\r\n            <HeadPermintaanBarang\r\n              onSubmit={(data) => this.sendData(data)}\r\n              permintaan_temp={this.props.permintaan_temp}\r\n            />\r\n          </div>\r\n          {/* Master Kategori */}\r\n\r\n          <br />\r\n          {/* End Master Kategori */}\r\n          <ModalGlobal\r\n            title={\r\n              this.state.isEdit\r\n                ? \"Edit Data Permintaan Barang\"\r\n                : \"Tambah Data Barang\"\r\n            }\r\n            content={\r\n              <Suspense\r\n                fallback={<Skeleton width={\"100%\"} height={50} count={2} />}\r\n              >\r\n                <ModalPermintaanBarang\r\n                  onSubmit={(data) => this.handleModal(data)}\r\n                  onSend={this.props.onSend}\r\n                  isEdit={this.state.isEdit}\r\n                />\r\n              </Suspense>\r\n            }\r\n          />\r\n\r\n          {/* End Tambah Master Kategori  */}\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(maptostate, null)(PermintaanBarang);\r\n","export const Gramasi = (value, previousValue) => {\r\n  if (!value) {\r\n    return value;\r\n  }\r\n  const onlyNums = value.replace(/[^0-9.]+/g, \"\");\r\n  if (!previousValue || value.length > previousValue.length) {\r\n    return onlyNums;\r\n  }\r\n};\r\n\r\nexport const NumberOnly = (value, previousValue) => {\r\n  if (!value) {\r\n    return value;\r\n  }\r\n  const onlyNums = value.replace(/[^0-9]+/g, \"\");\r\n  if (!previousValue || value.length > previousValue.length) {\r\n    return onlyNums;\r\n  }\r\n};\r\n\r\nexport const required = (value) => (value ? undefined : \"Tidak Boleh Kosong\");\r\nexport const number = (value) =>\r\n  value && isNaN(Number(value)) ? \"Must be a number\" : undefined;\r\n","import Swal from \"sweetalert2\";\r\n\r\nexport const simpanLocal = (nama, data) => {\r\n  return new Promise((resolve, reject) => {\r\n    let array = JSON.parse(localStorage.getItem(nama)) || [];\r\n    array.push(data);\r\n    localStorage.setItem(nama, JSON.stringify(array));\r\n    Swal.fire({\r\n      position: \"top-right\",\r\n      text: \"Tambah Data Berhasil\",\r\n      timer: 2000,\r\n      icon: \"success\",\r\n      showConfirmButton: false,\r\n    })\r\n      .then(() => resolve(\"Berhaisl\"))\r\n      .catch(() => reject(\"GAGAL\"));\r\n  });\r\n};\r\n"],"sourceRoot":""}