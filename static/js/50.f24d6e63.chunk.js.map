{"version":3,"sources":["pages/Transaksi/ReturnSupplier/ReturnSupplier.jsx","config/Helper.jsx"],"names":["__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_router_dom__WEBPACK_IMPORTED_MODULE_1__","_components_panel_panel__WEBPACK_IMPORTED_MODULE_2__","_ModalGlobal__WEBPACK_IMPORTED_MODULE_3__","redux_form__WEBPACK_IMPORTED_MODULE_4__","redux_form__WEBPACK_IMPORTED_MODULE_5__","_config_Helper__WEBPACK_IMPORTED_MODULE_6__","_actions_transaksi_action__WEBPACK_IMPORTED_MODULE_7__","react_redux__WEBPACK_IMPORTED_MODULE_8__","_Stoking_CetakNota__WEBPACK_IMPORTED_MODULE_9__","_components_notification_notification__WEBPACK_IMPORTED_MODULE_10__","_axios__WEBPACK_IMPORTED_MODULE_11__","_components_notification_function__WEBPACK_IMPORTED_MODULE_12__","HeadReturnSupplier","lazy","e","then","bind","ModalReturnSupplier","SupplierPenerimaan","Component","constructor","props","super","this","state","componentDidMount","dispatch","getListReturnSupplier","getKodeReturn","handleHead","hasil","data","no_retur_supplier","kode_return","tanggal_retur","tanggal","no_bon","kode_supplier","keterangan","diskon_rp","discount","detail_barang","JSON","parse","localStorage","getItem","console","log","stringify","tableRows","footerRows","table","forEach","i","rows","kode_barcode","nama_barang","merk","kwalitas","type","satuan","qty","parseFloat","harga_satuan","toLocaleString","total","push","footer","map","reduce","a","b","columnTabel","AxiosMasterPost","NotifSucces","CetakNota","getUserData","user_name","multipleDeleteLocal","reset","window","location","reload","catch","err","NotifError","response","AxiosMasterGet","res","setItem","handleModal","local","local2","filtered","findIndex","list","filtered2","parseInt","harga_total","dataTable","splice","simpanLocal","render","createElement","className","to","onSubmit","listreturnsupplier","sub_total","title","content","reduxForm","form","enableReinitialize","connect","transaksi","d","sweetalert2__WEBPACK_IMPORTED_MODULE_0__","sweetalert2__WEBPACK_IMPORTED_MODULE_0___default","nama","Promise","resolve","reject","array","Swal","fire","position","text","timer","icon","showConfirmButton"],"mappings":"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","file":"static/js/50.f24d6e63.chunk.js","sourcesContent":["import React, { Component, lazy } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Panel, PanelBody, PanelHeader } from \"../../../components/panel/panel\";\r\nimport ModalGlobal from \"../../ModalGlobal\";\r\nimport { reduxForm, reset } from \"redux-form\";\r\nimport { simpanLocal } from \"../../../config/Helper\";\r\nimport { getListReturnSupplier } from \"../../../actions/transaksi_action\";\r\nimport { connect } from \"react-redux\";\r\nimport CetakNota from \"../../Stoking/CetakNota\";\r\nimport {\r\n  getUserData,\r\n  NotifError,\r\n  NotifSucces,\r\n} from \"../../../components/notification/notification\";\r\nimport { AxiosMasterGet, AxiosMasterPost } from \"../../../axios\";\r\nimport { multipleDeleteLocal } from \"../../../components/notification/function\";\r\n\r\nconst HeadReturnSupplier = lazy(() =>\r\n  import(\"../ReturnSupplier/HeadReturnSupplier\")\r\n);\r\nconst ModalReturnSupplier = lazy(() => import(\"./ModalReturnSupplier\"));\r\nconst maptostate = (state) => {\r\n  return {\r\n    listreturnsupplier: state.transaksi.listreturnsupplier,\r\n    sub_total: state.transaksi.sub_total,\r\n  };\r\n};\r\nclass SupplierPenerimaan extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(getListReturnSupplier());\r\n    this.getKodeReturn();\r\n  }\r\n  handleHead(hasil) {\r\n    let data = {\r\n      no_retur_supplier: hasil.kode_return,\r\n      tanggal_retur: hasil.tanggal,\r\n      no_bon: hasil.no_bon,\r\n      kode_supplier: hasil.kode_supplier,\r\n      keterangan: hasil.keterangan,\r\n      diskon_rp: hasil.discount || 0,\r\n      detail_barang:\r\n        JSON.parse(localStorage.getItem(\"ReturnSupplier_temp_kirim\")) || [],\r\n    };\r\n    console.log(JSON.stringify(data));\r\n    // return false;\r\n    // INISIALISASI AUTOTABLE\r\n    const tableRows = [];\r\n    const footerRows = [];\r\n    let table = JSON.parse(localStorage.getItem(\"ReturnSupplier_temp\"));\r\n    table.forEach((data, i) => {\r\n      const rows = [\r\n        ++i,\r\n        data.kode_barcode,\r\n        data.nama_barang,\r\n        data.merk,\r\n        data.kwalitas,\r\n        data.type,\r\n        data.satuan,\r\n        data.qty,\r\n        parseFloat(data.harga_satuan).toLocaleString(\"id-ID\"),\r\n        parseFloat(data.total).toLocaleString(\"id-ID\"),\r\n      ];\r\n      tableRows.push(rows);\r\n    });\r\n    const footer = [\r\n      \"\",\r\n      \"\",\r\n      \"\",\r\n      \"\",\r\n      \"\",\r\n      \"\",\r\n      \"\",\r\n      \"\",\r\n      \"TOTAL TAGIHAN\",\r\n      parseFloat(\r\n        table.map((data) => data.total).reduce((a, b) => a + b, 0)\r\n      ).toLocaleString(\"id-ID\"),\r\n    ];\r\n    footerRows.push(footer);\r\n    let columnTabel = [\r\n      \"NO\",\r\n      \"BARCODE\",\r\n      \"JENIS BARANG\",\r\n      \"MERK\",\r\n      \"KW\",\r\n      \"TYPE\",\r\n      \"SATUAN\",\r\n      \"QTY\",\r\n      \"HARGA SATUAN\",\r\n      \"TOTAL\",\r\n    ];\r\n    // INISIALISASI SELESAI -> PANGGIL AXIOS DAN PANGGIL PRINT SAAT AXIOS BERHASIL\r\n    AxiosMasterPost(\"retur-barang-supplier/post-transaksi\", data)\r\n      .then(() => NotifSucces(\"Berhasil\"))\r\n      .then(() =>\r\n        CetakNota(\r\n          \"NO RETURN\",\r\n          hasil.kode_return,\r\n          \"TANGGAL\",\r\n          hasil.tanggal,\r\n          \"NO BON\",\r\n          hasil.no_bon,\r\n          \"SUPP\",\r\n          hasil.kode_supplier,\r\n          getUserData().user_name,\r\n          \"01-28-2021\",\r\n          getUserData().user_name,\r\n          columnTabel,\r\n          \"BUKTI RETURN BARANG SUPPLIER\",\r\n          tableRows,\r\n          footerRows,\r\n          true\r\n        )\r\n      )\r\n      .then(() =>\r\n        multipleDeleteLocal([\r\n          \"ReturnSupplier_temp\",\r\n          \"ReturnSupplier_temp_kirim\",\r\n          \"return_supplier\",\r\n          \"return_keterangan\",\r\n          \"return_tanggal_bon\",\r\n          \"return_kode\",\r\n        ])\r\n      )\r\n      .then(() => this.props.dispatch(reset(\"HeadSupplierPenerimaan\")))\r\n      .then(() => this.getKodeReturn())\r\n      .then(() => this.props.dispatch(getListReturnSupplier()))\r\n      .then(() => window.location.reload())\r\n      .catch((err) => NotifError(err.response.data));\r\n  }\r\n\r\n  getKodeReturn() {\r\n    AxiosMasterGet(\"retur-barang-supplier/generate/no-trx\")\r\n      .then((res) =>\r\n        localStorage.setItem(\"kode_return\", res.data[0].no_retur_supplier)\r\n      )\r\n      .catch((err) => console.log(err));\r\n  }\r\n  handleModal(hasil) {\r\n    let local =\r\n      JSON.parse(localStorage.getItem(\"ReturnSupplier_temp_kirim\")) || [];\r\n    let local2 = JSON.parse(localStorage.getItem(\"ReturnSupplier_temp\")) || [];\r\n    let filtered = local.findIndex(\r\n      (list) => list.kode_barcode === hasil.kode_barcode\r\n    );\r\n    let filtered2 = local2.findIndex(\r\n      (list) => list.kode_barcode === hasil.kode_barcode\r\n    );\r\n    if (filtered !== -1) {\r\n      let data = {\r\n        kode_barcode: hasil.kode_barcode,\r\n        qty: parseInt(hasil.qty) + parseFloat(local[filtered].qty),\r\n        harga_satuan: parseFloat(hasil.harga_satuan),\r\n        harga_total:\r\n          parseFloat(hasil.total) + parseFloat(local[filtered].harga_total),\r\n      };\r\n      let dataTable = {\r\n        harga_satuan: hasil.harga_satuan,\r\n        kode_barcode: hasil.kode_barcode,\r\n        kwalitas: hasil.kwalitas,\r\n        merk: hasil.merk,\r\n        nama_barang: hasil.nama_barang,\r\n        qty: parseFloat(hasil.qty) + parseFloat(local2[filtered2].qty),\r\n        satuan: hasil.satuan,\r\n        total: parseFloat(hasil.total) + parseFloat(local2[filtered2].total),\r\n        type: hasil.type,\r\n      };\r\n      local.splice(filtered, 1);\r\n      local2.splice(filtered2, 1);\r\n      local.push(data);\r\n      local2.push(dataTable);\r\n      localStorage.setItem(\"ReturnSupplier_temp\", JSON.stringify(local2));\r\n      localStorage.setItem(\"ReturnSupplier_temp_kirim\", JSON.stringify(local));\r\n      NotifSucces(\"Berhasil\");\r\n      this.props.dispatch(reset(\"ModalReturnSupplier\"));\r\n      this.props.dispatch(getListReturnSupplier());\r\n    } else {\r\n      let data = {\r\n        kode_barcode: hasil.kode_barcode,\r\n        qty: parseInt(hasil.qty),\r\n        harga_satuan: parseFloat(hasil.harga_satuan),\r\n        harga_total: parseFloat(hasil.total),\r\n      };\r\n      let dataTable = {\r\n        harga_satuan: hasil.harga_satuan,\r\n        kode_barcode: hasil.kode_barcode,\r\n        kwalitas: hasil.kwalitas,\r\n        merk: hasil.merk,\r\n        nama_barang: hasil.nama_barang,\r\n        qty: hasil.qty,\r\n        satuan: hasil.satuan,\r\n        total: hasil.total,\r\n        type: hasil.type,\r\n      };\r\n      simpanLocal(\"ReturnSupplier_temp\", dataTable)\r\n        .then(() => this.props.dispatch(reset(\"ModalReturnSupplier\")))\r\n        .then(() => this.props.dispatch(getListReturnSupplier()));\r\n      simpanLocal(\"ReturnSupplier_temp_kirim\", data)\r\n        .then(() => this.props.dispatch(reset(\"ModalReturnSupplier\")))\r\n        .then(() => this.props.dispatch(getListReturnSupplier()));\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Transaksi</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Return Barang Supplier</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Return Barang Supplier</h1>\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-12\">\r\n            <Panel>\r\n              <PanelHeader>Return Barang Supplier</PanelHeader>\r\n              <PanelBody>\r\n                <br />\r\n                <div className=\"col-lg-12\">\r\n                  <HeadReturnSupplier\r\n                    onSubmit={(data) => this.handleHead(data)}\r\n                    listreturnsupplier={this.props.listreturnsupplier}\r\n                    sub_total={this.props.sub_total}\r\n                  />\r\n                </div>\r\n                <br />\r\n\r\n                {/* End Tambah Master Kategori  */}\r\n              </PanelBody>\r\n            </Panel>\r\n            <ModalGlobal\r\n              title=\"Return Barang Supplier\"\r\n              content={\r\n                <ModalReturnSupplier\r\n                  onSubmit={(data) => this.handleModal(data)}\r\n                />\r\n              }\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSupplierPenerimaan = reduxForm({\r\n  form: \"SupplierPenerimaan\",\r\n  enableReinitialize: true,\r\n})(SupplierPenerimaan);\r\nexport default connect(maptostate, null)(SupplierPenerimaan);\r\n","import Swal from \"sweetalert2\";\r\n\r\nexport const simpanLocal = (nama, data) => {\r\n  return new Promise((resolve, reject) => {\r\n    let array = JSON.parse(localStorage.getItem(nama)) || [];\r\n    array.push(data);\r\n    localStorage.setItem(nama, JSON.stringify(array));\r\n    Swal.fire({\r\n      position: \"top-right\",\r\n      text: \"Tambah Data Berhasil\",\r\n      timer: 2000,\r\n      icon: \"success\",\r\n      showConfirmButton: false,\r\n    })\r\n      .then(() => resolve(\"Berhaisl\"))\r\n      .catch(() => reject(\"GAGAL\"));\r\n  });\r\n};\r\n"],"sourceRoot":""}