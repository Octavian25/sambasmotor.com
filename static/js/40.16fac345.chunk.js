(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1069:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(5),s=t(33),o=t(67),c=t(160),i=t(161),m=t(6),p=t(24),u=t(10),d=t(54),h=t(44),g=t(389);class b extends l.Component{constructor(e){super(e),this.state={listSupplier:[],columns:[{dataField:"tanggal_terima",text:"Tanggal"},{dataField:"no_terima",text:"Nomor bon"},{dataField:"kode_supplier",text:"Kode Supplier"},{dataField:"sisa_hutang",text:"Total",formatter:e=>e?e.toLocaleString("id-ID"):0},{dataField:"retur_rp",text:"Total Return",formatter:e=>e?e.toLocaleString("id-ID"):0},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(e,a)=>{let t={sisa_hutang:a.sisa_hutang,retur_rp:a.retur_rp,kode_supplier:a.kode_supplier,no_terima:a.no_terima,tanggal_terima:a.tanggal_terima};return n.a.createElement("div",{className:"row text-center"},n.a.createElement("div",{className:"col-12"},n.a.createElement("button",{type:"button",onClick:()=>this.setBayar(t),className:"btn btn-success mr-3"},"Bayar",n.a.createElement("i",{className:"fa fa-money-bill-alt ml-2"}))))}}],data:[{tanggal:"01/30/2021",nomor_bon:"PS-00001",kode_supplier:"SP001",total:1e6}]}}setBayar(e){this.props.dispatch(Object(p.D)(e)),this.props.dispatch(Object(m.Wb)())}componentDidMount(){Object(u.b)("bayar-hutang-supplier/generate/no-trx").then(e=>this.setNomor(e)),Object(u.b)("supplier/get/all").then(e=>this.setState({listSupplier:e.data})),this.props.change("tanggal",d.a)}setNomor(e){this.props.change("kode_hutang",e.data[0].no_bayar_supplier),localStorage.setItem("no_bayar_supplier",e.data[0].no_bayar_supplier),localStorage.setItem("tanggal",Object(d.a)())}setLocal(e,a){localStorage.setItem(e,a)}render(){return n.a.createElement("form",{onSubmit:this.props.handleSubmit},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(c.a,{name:"kode_hutang",component:h.c,type:"text",label:"Kode Hutang",placeholder:"Masukan Kode Hutang",readOnly:!0})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(c.a,{name:"kode_supplier",component:h.e,options:this.state.listSupplier.map(e=>{return{value:e.kode_supplier,name:e.nama_supplier}}),type:"text",label:"Kode Supplier",placeholder:"Masukan Kode Supplier"})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(c.a,{name:"tanggal",component:h.c,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal",onChange:e=>this.setLocal("tanggal",e.target.value)})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(c.a,{name:"no_bon",component:h.c,type:"text",label:"Nomor Bon",placeholder:"Masukan Nomor Bon",onChange:e=>this.setLocal("no_bon",e.target.value)})),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-primary"},"Cari ",n.a.createElement("i",{className:"fa fa-search ml-3"})))),n.a.createElement("div",{className:"col-lg-12 mt-3"},n.a.createElement(g.a,{keyField:"no_terima",data:this.props.listTransaksi||[],columns:this.state.columns,CSVExport:!0,textEmpty:"Silahkan masukan nomor bon dan klik Tombol Cari Untuk melihat data"})))))}}var E=b=Object(i.a)({form:"HeadPembayaranSupplier",enableReinitialize:!0})(b),_=t(388),N=t(173),k=t(397),y=t(492);const S=Object(k.createNumberMask)({prefix:"Rp. ",locale:"id-ID"});class v extends l.Component{constructor(e){super(e),this.state={type_bayar:"row",cash:"col-lg-12 d-none",transfer:"col-lg-12 d-none",listBank:[],bayar:!0}}reRender(){this.setState({bayar:!this.state.bayar})}setTotal(){this.props.total>this.props.total_cash&&Object(h.a)("Jumlah Cash Melebihi Tagihan"),this.props.change("total_ref",this.props.total_cash),this.props.change("total",this.props.total),this.props.change("no_bon",this.props.no_terima),this.props.change("kode_supplier",this.props.kode_supplier),this.props.change("tanggal_terima",localStorage.getItem("tanggal"))}componentDidMount(){Object(u.b)("bank/get/all").then(e=>this.setState({listBank:e.data}))}render(){return n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("form",{onSubmit:this.props.handleSubmit},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-6 text-center mb-3"},n.a.createElement("h4",null,"Total Hutang"),n.a.createElement("h1",null,"Rp. ".concat(parseFloat(this.props.sisa_hutang).toLocaleString("id-ID")))),n.a.createElement("div",{className:"col-lg-6 text-center mb-3"},n.a.createElement("h4",null,"Total Retur"),n.a.createElement("h1",null,"Rp. ".concat(parseFloat(this.props.retur_rp).toLocaleString("id-ID")))),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("h3",null,"Pembayaran Cash"),n.a.createElement("br",null)),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(c.a,Object.assign({name:"cash",component:h.c,type:"text",label:"Cash",placeholder:"Masukan Cash"},S,{onChange:this.setTotal(),onBlur:this.setTotal()}))),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(c.a,{name:"kode_supplier",component:h.c,type:"text",label:"Kode Supplier",placeholder:"Masukan Kode Supplier"})),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(c.a,{name:"tanggal_terima",component:h.c,type:"text",label:"Tanggal Terima",placeholder:"Masukan Tanggal Terima"})),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(c.a,{name:"no_bon",component:h.c,type:"text",label:"Nomor Bon",placeholder:"Masukan Nomor Bon"}),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(c.a,{name:"retur_rp",component:h.c,type:"text",label:"Return Rp",placeholder:"Masukan Return Rp"})),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(c.a,{name:"sisa_hutang",component:h.c,type:"text",label:"Sisa Hutang",placeholder:"Masukan Sisa Hutang"}))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("p",null,"* Silahkan isi sesuai metode pembayaran, bisa menggunakan 2 metode sekaligus"))),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("h3",null,"Pembayaran Transfer"),n.a.createElement("br",null)),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(c.a,Object.assign({name:"transfer",component:h.c,type:"text",label:"Transfer",placeholder:"Masukan Transfer"},S,{onChange:this.setTotal(),onBlur:this.setTotal()}))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(c.a,{name:"no_ac_asal",component:h.e,options:this.state.listBank.map(e=>{return{value:e.no_ac,name:"".concat(e.no_ac," - ( ").concat(e.atas_nama," )")}}),type:"text",label:"Nomor A/C Asal",placeholder:"Masukan Nomor A/C Asal"})),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(c.a,{name:"no_ac_tujuan",component:h.c,type:"text",label:"Nomor A/C Tujuan",placeholder:"Masukan Nomor A/C Tujuan"}))),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("h3",null,"Pembayaran Return"),n.a.createElement("br",null)),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(y.a,{reRender:()=>this.reRender()})))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-6"},n.a.createElement(c.a,Object.assign({name:"total_ref",component:h.c,type:"text",label:"Total Harus Dibayar",placeholder:"Masukan Total Harus Dibayar",readOnly:!0},S))),n.a.createElement("div",{className:"col-lg-6"},n.a.createElement(c.a,Object.assign({name:"total",component:h.c,type:"text",label:"Total Dibayar",placeholder:"Masukan Total Dibayar",readOnly:!0},S))))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-primary"},"Bayar"))))))}}v=Object(i.a)({form:"ModalBayarSupplierPenerimaan",enableReinitialize:!0,validate:e=>{const a={};return e.cash+e.transfer>e.sisa_hutang&&(a.cash="Total Bayar Tidak Boleh Lebih Dari Sisa Hutang",a.transfer="Total Bayar Tidak Boleh Lebih Dari Sisa Hutang"),a}})(v);const x=Object(N.a)("ModalBayarSupplierPenerimaan");var f=Object(s.b)(e=>{const a=x(e,"cash","transfer"),t=a.cash,l=a.transfer;let n=JSON.parse(localStorage.getItem("list_return"))||[],r=n&&n.map(e=>e.total_retur).reduce((e,a)=>e+a,0);return{total:parseFloat(t||0)+parseFloat(l||0),sisa_hutang:e.transaksi.listPembayaran.sisa_hutang,retur_rp:r,kode_supplier:e.transaksi.listPembayaran.kode_supplier,no_terima:e.transaksi.listPembayaran.no_terima,tanggal_terima:e.transaksi.listPembayaran.tanggal_terima,total_cash:parseFloat(e.transaksi.listPembayaran.sisa_hutang)-parseFloat(r),initialValues:{sisa_hutang:e.transaksi.listPembayaran.sisa_hutang}}})(v),O=t(417),T=t(66),j=t(52);a.default=Object(s.b)(e=>({kunci_temp:e.stocking.kunci_temp,noFaktur:e.datamaster.noFaktur}),null)(class extends n.a.Component{constructor(e){super(e),this.state={isEdit:!1,modalDialog:!1,isLoading:!1,listTransaksi:[]}}componentDidMount(){this.props.dispatch(Object(m.Ab)())}handleSubmit(e){let a={no_bayar_supplier:localStorage.getItem("no_bayar_supplier"),tanggal:e.tanggal_terima,no_bon:e.no_bon,kode_supplier:e.kode_supplier,total_pembayaran:e.total||0,no_ref:this.props.noFaktur,no_ref_cash:this.props.noFaktur,cash_rp:e.cash||0,transfer_rp:e.transfer||0,no_ac_asal:e.no_ac_asal?e.no_ac_asal.toString():"-",no_ac_tujuan:e.no_ac_tujuan?e.no_ac_tujuan.toString():"-",retur_rp:e.retur_supplier||0,detail_bayar_retur:JSON.parse(localStorage.getItem("list_return"))||[]};console.log(JSON.stringify(a)),Object(u.c)("bayar-hutang-supplier/post-transaksi",a).then(()=>Object(O.a)("Tanggal",Object(d.a)(),"Nomor Bon",localStorage.getItem("no_bayar_supplier"),"SUPPLIER",e.kode_supplier,"","","ADMIN",Object(d.a)(),"ADMIN",["NO","JENIS BAYAR","TOTAL"],"BUKTI PEMBAYARAN HUTANG SUPPLIER",[["1","CASH",parseFloat(e.cash||0).toLocaleString("id-ID")],["2","TRANSFER",parseFloat(e.transfer||0).toLocaleString("id-ID")],["3","RETURN",parseFloat(e.retur_supplier||0).toLocaleString("id-ID")]],!1)).then(()=>Object(h.b)("Berhasil")).then(()=>Object(j.c)(["tanggal","no_bayar_supplier","noFaktur"])).then(()=>this.props.dispatch(Object(T.a)("HeadPembayaranSupplier"))).then(()=>this.props.dispatch(Object(T.a)("ModalPembayaranSupplier"))).then(()=>this.props.dispatch(Object(m.Ab)())).then(()=>this.props.dispatch(Object(m.Tb)())).then(()=>window.location.reload()).catch(e=>Object(h.a)(e.response.data))}handleCari(e){Object(u.b)("bayar-hutang-supplier/getDataHutangSupplier/"+"".concat(e.kode_supplier||"-","&").concat(e.tanggal||d.a,"&").concat(e.no_bon||"-")).then(e=>this.setState({listTransaksi:e.data}))}render(){return n.a.createElement("div",null,n.a.createElement("ol",{className:"breadcrumb float-xl-right"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(r.b,{to:"#"},"Transaksi")),n.a.createElement("li",{className:"breadcrumb-item active"},"Pembayaran Supplier")),n.a.createElement("h1",{className:"page-header"},"Pembayaran Supplier "),n.a.createElement(o.a,null,n.a.createElement(o.c,null,"Pembayaran Supplier"),n.a.createElement(o.b,null,n.a.createElement("br",null),n.a.createElement(E,{onSubmit:e=>this.handleCari(e),listMerk:this.state.listMerk,bayar:!0,listTransaksi:this.state.listTransaksi}))),n.a.createElement(_.a,{content:n.a.createElement(f,{onSubmit:e=>this.handleSubmit(e)}),title:"Pembayaran Supplier"}))}})},388:function(e,a,t){"use strict";var l=t(0),n=t.n(l),r=t(33),s=t(403),o=t(401),c=t(402),i=t(6);a.a=Object(r.b)(e=>({isOpen:e.datamaster.modalDialog}),null)(class extends l.Component{constructor(e){super(e),this.state={}}render(){return n.a.createElement(s.a,{backdrop:"static",keyboard:!1,isOpen:this.props.isOpen,toggle:()=>this.props.dispatch(Object(i.Tb)()),size:this.props.size||"xl"},n.a.createElement(o.a,{toggle:()=>this.props.dispatch(Object(i.Tb)())},this.props.title),n.a.createElement(c.a,null,this.props.content))}})},389:function(e,a,t){"use strict";var l=t(0),n=t.n(l),r=t(395),s=t.n(r),o=t(398),c=t.n(o),i=t(399),m=t.n(i),p=t(390),u=t(112),d=t.n(u);const h=o.Search.SearchBar,g=o.CSVExport.ExportCSVButton;a.a=function(e){let a=e.textEmpty,t=e.handleClick,l=e.tambahData,r=e.expandRow,o=e.selectRow,i=e.exportCSV;return e.data?n.a.createElement(c.a,{keyField:e.keyField,data:e.data||[],columns:e.columns,search:!0},e=>n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-6"},n.a.createElement("div",{className:"text-left"},n.a.createElement(h,e.searchProps))),n.a.createElement("div",{className:"col-6"},n.a.createElement("div",{className:"text-right"},l&&n.a.createElement("button",{onClick:t,className:"btn btn-primary",type:"button"},"Tambah Data",n.a.createElement("i",{className:"fa fa-plus ml-3"})))),n.a.createElement("hr",null),n.a.createElement("div",{className:"col-12"},n.a.createElement(s.a,Object.assign({pagination:m()(),selectRow:o,expandRow:r},e.baseProps,{striped:!0,noDataIndication:n.a.createElement(p.a,{text:a||"Tidak Ada Data"})})),n.a.createElement("br",null),i&&n.a.createElement(g,e.csvProps,"Export CSV!!")))):e.empty?n.a.createElement(c.a,{keyField:e.keyField,data:e.data||[],columns:e.columns,search:!0},e=>n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-6"},n.a.createElement("div",{className:"text-left"},n.a.createElement(h,e.searchProps))),n.a.createElement("div",{className:"col-6"},n.a.createElement("div",{className:"text-right"},l&&n.a.createElement("button",{onClick:t,className:"btn btn-primary",type:"button"},"Tambah Data",n.a.createElement("i",{className:"fa fa-plus ml-3"})))),n.a.createElement("hr",null),n.a.createElement("div",{className:"col-12"},n.a.createElement(s.a,Object.assign({pagination:m()()},e.baseProps,{noDataIndication:n.a.createElement(p.a,{text:a||"Tidak Ada Data"})})),n.a.createElement("br",null),e.CSVExport&&n.a.createElement(g,e.csvProps,"Export CSV!!")))):n.a.createElement(d.a,{width:"100%",height:250})}},390:function(e,a,t){"use strict";var l=t(0),n=t.n(l),r=t(391),s=t.n(r);a.a=function(e){return n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"text-center"},n.a.createElement("img",{src:s.a,width:"250",height:"250",alt:"Empty"}),n.a.createElement("h5",null,e.text)))}},391:function(e,a,t){e.exports=t.p+"static/media/empty.02c14787.svg"},417:function(e,a,t){"use strict";var l=t(83);t(172);a.a=((e="",a="",t="",n="",r="",s="",o="",c="",i="",m="",p="",u=[],d="",h,g,b)=>{const E=new l.default;E.autoTable(u,h,{foot:g,startY:40,theme:"plain",bodyStyles:{lineWidth:.02,lineColor:"#000"},headStyles:{lineWidth:.02,lineColor:"#000",fillColor:[187,187,187]}});let _=E.lastAutoTable.finalY+10;E.text(d,14,15),E.setFontSize(10),E.text("".concat(e,"\t: ").concat(a),14,25),E.text("".concat(t,"\t: ").concat(n),120,25),E.text("".concat(r,"\t: ").concat(s),14,30),E.text("".concat(o,"\t: ").concat(c),120,30),b?(E.text("Mengetahui",27,_+5),E.text("(.................................)",20,_+25),E.text("Penerima",140,_+5),E.text("(.................................)",130,_+25)):(E.text("User\t: ".concat(i),14,_+10),E.text("Cetak\t: ".concat(m),14,_+16),E.text("Valid\t: ".concat(p),14,_+22));var N="<embed width='100%' height='100%' src='"+E.output("datauristring")+"'/>",k=window.open();k.document.open(),k.document.write(N),k.document.close()})},492:function(e,a,t){"use strict";var l=t(0),n=t.n(l),r=t(161),s=t(10),o=t(44);class c extends l.Component{constructor(e){super(e),this.state={nomor_return:"",deleted:!0}}tambahData(){if(""===this.state.nomor_return)return Object(o.g)("Silahkan isi nomor return"),!1;Object(s.b)("retur-barang-supplier/getDataReturSupplier/"+this.state.nomor_return).then(e=>{if(0===e.data.length)return console.log("NOL"),Object(o.g)("Nomor Return Tidak Ditemukan"),this.props.change(""),!1;console.log("TIDAK NOL"),this.saveLocal(e)}).catch(e=>"Error : ".concat(e&&e.response.data))}saveLocal(e){let a=JSON.parse(localStorage.getItem("list_return"))||[],t={no_faktur:e&&e.data.no_retur_supplier,total_retur:e&&e.data.jml_netto_rp},l=a.findIndex(a=>a.no_return===e.data.no_retur_supplier);~l?a[l]=t:a.push(t),localStorage.setItem("list_return",JSON.stringify(a)),this.setState({no_faktur:e&&e.data.no_retur_supplier,total_retur:e&&e.data.jml_netto_rp}),this.props.reRender()}delete(e){let a=JSON.parse(localStorage.getItem("list_return"))||[];a.splice(e,1),localStorage.setItem("list_return",JSON.stringify(a)),Object(o.h)("Berhasil Menghapus Data"),this.setState({deleted:!this.state.deleted}),this.props.reRender()}render(){let e=JSON.parse(localStorage.getItem("list_return"))||[],a="Rp. "+e.map(e=>e.total_retur).reduce((e,a)=>e+a,0).toLocaleString("id-ID");return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-9"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"Nomor Return"),n.a.createElement("input",{type:"text",className:"form-control",onChange:e=>this.setState({nomor_return:e.target.value})}))),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement("label",{htmlFor:""},"."),n.a.createElement("button",{type:"button",className:"btn btn-block btn-primary",onClick:()=>this.tambahData()},n.a.createElement("strong",null,"+")))),n.a.createElement("div",{className:"widget-list widget-list-rounded m-b-30"},e.map((e,a)=>n.a.createElement("div",{className:"widget-list-item"},n.a.createElement("div",{className:"widget-list-content"},n.a.createElement("h4",{className:"widget-list-title"},e.no_faktur),n.a.createElement("p",{className:"widget-list-desc"},parseFloat(e.total_retur).toLocaleString("id-ID"))),n.a.createElement("div",{className:"widget-list-action"},n.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:()=>this.delete(a)},n.a.createElement("i",{className:"fa fa-times"})))))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-6"},n.a.createElement("h5",null,"Total Return")),n.a.createElement("div",{className:"col-6"},n.a.createElement("h5",null,a)))))}}c=Object(r.a)({form:"ComponentReturn",enableReinitialize:!0})(c),a.a=c}}]);
//# sourceMappingURL=40.16fac345.chunk.js.map