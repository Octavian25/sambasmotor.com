(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1073:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),c=t(29),o=t(7),s=t(48),r=t(95),m=t(9),i=t(27),p=t(41),d=t(496),g=t(131),u=t(195),h=t(196),k=t(6),b=t(130);class E extends l.Component{constructor(e){super(e),this.state={columns:[{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_supplier",text:"Kode Supplier"},{dataField:"qty",text:"Qty"}]}}componentDidMount(){this.props.dispatch(Object(k.Bb)()),this.props.dispatch(Object(r.c)()),this.props.change("lokasi",localStorage.getItem("lokasi_stock_opname")||"")}render(){return n.a.createElement("form",{onSubmit:this.props.handleSubmit},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(u.a,{name:"tanggal",component:i.c,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal"})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(u.a,{name:"lokasi",component:i.e,options:this.props.listgudang.map(e=>{return{value:e.kode_lokasi_gudang,name:e.nama_lokasi_gudang}}),type:"text",label:"Lokasi",placeholder:"Masukan Lokasi",onChange:e=>localStorage.setItem("lokasi_stock_opname",e)})),n.a.createElement("div",{className:"col-lg-12 mb-3"},n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:()=>this.props.dispatch(Object(k.Wb)()),disabled:!localStorage.getItem("lokasi_stock_opname")},"Tambah Data ",n.a.createElement("i",{className:"fa fa-plus ml-3"})))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(b.a,{keyField:"kode_barcode",data:this.props.liststockopname||[],columns:this.state.columns,textEmpty:"Silahkan pilih Lokasi, Setelah itu tambah barang"})),n.a.createElement("div",{className:"col-lg-12 mb-3"},n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-primary"},"Simpan ",n.a.createElement("i",{className:"fa fa-paper-plane"}))))))}}E=Object(h.a)({form:"HeadStockOpname",enableReinitialize:!0})(E);var S=Object(c.b)(e=>({listgudang:e.datamaster.listgudang,liststockopname:e.supervisor.liststockopname}))(E),N=t(486);class _ extends l.Component{constructor(e){super(e),this.state={listSupplier:[]}}getBarcode(e){let a=localStorage.getItem("lokasi_hancur")||"";Object(m.b)("hancur-barang/get/BarangByBarcodeLokasi/"+"".concat(e.target.value,"&").concat(a)).then(e=>this.setBarang(e.data))}setBarang(e){console.log(e),this.props.change("kode_barang",e[0].kode_barang),this.props.change("nama_barang",e[0].nama_barang),this.props.change("merk",e[0].merk_barang),this.props.change("kwalitas",e[0].kwalitas),this.props.change("satuan",e[0].satuan),this.setState({listSupplier:e&&e[0].data_supplier.map(e=>{return{value:"".concat(e.kode_supplier,"||").concat(e.stock),name:e.nama_supplier}})})}setStock(e){let a=e.split("||");this.props.change("kode_supplier",a[0]),this.props.change("stock",a[1])}render(){return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:this.props.handleSubmit},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(u.a,{name:"kode_barcode",component:i.c,type:"text",label:"Kode Barcode",placeholder:"Masukan Kode Barcode",onChange:e=>this.getBarcode(e),onBlur:e=>this.getBarcode(e)})),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(u.a,{name:"kode_barang",component:i.c,type:"text",label:"Nama Barang",placeholder:"Masukan Nama Barang",readOnly:!0})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(u.a,{name:"nama_barang",component:i.c,type:"text",label:"Nama Barang",placeholder:"Masukan Nama Barang",readOnly:!0})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(u.a,{name:"merk",component:i.c,type:"text",label:"Merk",placeholder:"Masukan Merk",readOnly:!0})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(u.a,{name:"kwalitas",component:i.c,label:"Kualitas",placeholder:"Masukan Kualitas",readOnly:!0})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(u.a,{name:"satuan",component:i.c,type:"text",label:"Satuan",placeholder:"Masukan Satuan",readOnly:!0})),n.a.createElement("div",{className:"col-lg-3"},n.a.createElement(u.a,{name:"kode_supplier1",component:i.e,options:this.state.listSupplier,type:"text",label:"Kode Supplier",placeholder:"Masukan Kode Supplier",onChange:e=>this.setStock(e)})),n.a.createElement("div",{className:"col-lg-3 d-none"},n.a.createElement(u.a,{name:"kode_supplier",component:i.c,type:"text",label:"Kode Supplier",placeholder:"Masukan Kode Supplier"})),n.a.createElement("div",{className:"col-lg-2"},n.a.createElement(u.a,{name:"stock",component:i.c,type:"number",label:"Stock",placeholder:"Masukan Stock",readOnly:!0})),n.a.createElement("div",{className:"col-lg-2"},n.a.createElement(u.a,{name:"qty",component:i.c,type:"number",label:"Qty",placeholder:"Masukan Qty",validate:N.a})))),n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-primary"},"Simpan ",n.a.createElement("i",{className:"fa fa-paper-plane"}))))))}}var v=_=Object(h.a)({form:"ModalStockOpname",enableReinitialize:!0})(_);a.default=Object(c.b)()(class extends l.Component{constructor(e){super(e),this.state={}}componentDidMount(){}handleHead(e){let a={tanggal:e.tanggal,kode_lokasi_gudang:e.lokasi,detail_barang:JSON.parse(localStorage.getItem("StockOpname_temp"))||[]};Object(m.c)("stock-opname/post-transaksi",a).then(()=>Object(i.b)("Stockopname Berhasil")).then(()=>this.props.dispatch(Object(s.a)("HeadStockOpname"))).then(()=>localStorage.removeItem("StockOpname_temp")).then(()=>localStorage.removeItem("lokasi_stock_opname")).then(()=>this.props.dispatch(Object(r.c)())).catch(e=>Object(i.g)("Gagal StockOpname , Error : ".concat(e.response.data)))}handleModal(e){let a={kode_supplier:e.kode_supplier,kode_barcode:e.kode_barcode,qty:e.qty};Object(d.a)("StockOpname_temp",a),this.props.dispatch(Object(r.c)()),this.props.dispatch(Object(s.a)("ModalStockOpname"))}render(){return n.a.createElement("div",null,n.a.createElement("ol",{className:"breadcrumb float-xl-right"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(o.b,{to:"#"},"Stock Opname")),n.a.createElement("li",{className:"breadcrumb-item active"},"Stock Opname Barang")),n.a.createElement("h1",{className:"page-header"},"Stock Opname Barang "),n.a.createElement(p.a,null,n.a.createElement(p.c,null,"Stock Opname Barang"),n.a.createElement(p.b,null,n.a.createElement("div",{className:"col-lg-12"},n.a.createElement(S,{onSubmit:e=>this.handleHead(e),liststockopname:this.props.liststockopname})))),n.a.createElement(g.a,{title:"Tambah Data Barang",content:n.a.createElement(v,{onSubmit:e=>this.handleModal(e)})}))}})},486:function(e,a,t){"use strict";t.d(a,"a",function(){return l});const l=e=>e?void 0:"Tidak Boleh Kosong"},496:function(e,a,t){"use strict";t.d(a,"a",function(){return c});var l=t(16),n=t.n(l);const c=(e,a)=>new Promise((t,l)=>{let c=JSON.parse(localStorage.getItem(e))||[];c.push(a),localStorage.setItem(e,JSON.stringify(c)),n.a.fire({position:"top-right",text:"Tambah Data Berhasil",timer:2e3,icon:"success",showConfirmButton:!1}).then(()=>t("Berhaisl")).catch(()=>l("GAGAL"))})}}]);
//# sourceMappingURL=18.b55e9b25.chunk.js.map